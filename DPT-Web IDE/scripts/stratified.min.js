var __oni_rt={};!function(exports){function CFException_toString(){var a=this.name+": "+this.message;if(this.__oni_stack)for(var b=0;b<this.__oni_stack.length;++b){var c=this.__oni_stack[b];c=1==c.length?c[0]:"    at "+c.slice(0,2).join(":"),a+="\n"+c}return a}function adopt_native_stack(a,b){if(a.stack){if("nodejs"!==exports.hostenv)return a.stack="",void 0;var c=String(a.stack),d=c.indexOf(": "),e=-1===d?0:d+2;-1!==c.lastIndexOf("\n",e)&&(e=0);var f=String(a.message);c=f&&c.lastIndexOf(f,e)==e?c.slice(e+f.length):c.replace(/^\w*Error/,""),c=c.trim(),a.stack="";var h,g=c.split("\n");for(h=0;h<g.length&&!(b&&-1!==g[h].indexOf(b)||-1!==g[h].indexOf("stratified-node.js")||-1!==g[h].indexOf("stratified.js"));h++)a.__oni_stack.push([g[h]])}}function CFException(a,b,c,d){this.type=a,this.val=b,"t"==a&&(b instanceof Error||"object"==typeof b&&b.message)&&(b._oniE!==token_oniE&&(b._oniE=token_oniE,b.__oni_stack=b.__oni_stack||[],b.line=c,b.file=d||"unknown SJS source",adopt_native_stack(b,d),b.hasOwnProperty("toString")||(b.toString=CFException_toString)),c&&b.__oni_stack.push([d||"unknown SJS source",c]))}function ReturnToParentContinuation(a,b,c){this.frame=a,this.idx=b,this.val=c}function cont(a,b,c){for(var d=a.cont(b,c);d&&d.__oni_rtpc;)d=d.execute();return d}function is_ef(a){return a&&a.__oni_ef}function setEFProto(a){for(var b in EF_Proto)a[b]=EF_Proto[b]}function mergeCallstacks(a,b){a.callstack?(a.callstack=a.callstack.concat(b.callstack),a.callstack.length>20&&a.callstack.splice(10,a.callstack.length-20+1,["    ...(frames omitted)"])):a.callstack=b.callstack}function execIN(a,b){return a&&a.__oni_dis==token_dis?a.exec(a.ndata,b):a}function Env(a,b,c,d,e,f,g,h){this.aobj=a,this.tobj=b,this.file=c,this.blbref=d,this.blrref=e,this.blscope=f,this.fold=g,this.branch=h}function copyEnv(a){return new Env(a.aobj,a.tobj,a.file,a.blbref,a.blrref,a.blscope,a.fold,a.branch)}function I_call(a,b){try{var c=a[0].call(b);return is_ef(c)&&(c.callstack||(c.callstack=[]),c.callstack.push([b.file,a[1]])),c}catch(d){if(d&&d.__oni_cfx){if("blb"==d.type&&d.ef==b.blscope)return UNDEF}else d=new CFException("t",d,a[1],b.file);return d}}function I_nblock(a,b){try{return a[0].call(b)}catch(c){return c&&c.__oni_cfx||(c=new CFException("t",c,a[1],b.file)),c}}function I_blocklambda(a,b){return a.bind(b)}function EF_Seq(a,b){this.ndata=a,this.env=b,8&a[0]?64&a[0]?(this.env=copyEnv(b),this.env.blbref=b.blscope,this.env.blrref=b.blrref,this.env.blscope=this):(b.blbref=this,b.blrref=this,b.blscope=this):1&a[0]&&(this.env=copyEnv(b),64&a[0]&&(this.env.blbref=b.blscope),this.env.blscope=null),this.tailcall=!(8&a[0]),this.swallow_r=1&a[0],32&a[0]&&(this.swallow_r=2),this.sc=6&a[0],16&a[0]&&(this.unreturnable=!0,this.toplevel=!0)}function I_seq(a,b){return cont(new EF_Seq(a,b),1)}function EF_Sc(a,b){this.ndata=a,this.env=b,this.i=2,this.pars=[]}function I_sc(a,b){return cont(new EF_Sc(a,b),0)}function testIsFunction(a){return"function"==typeof a?!0:!!/(?:\[[^o])|(?:^\/)/.exec(""+a)}function EF_Fcall(a,b){this.ndata=a,this.env=b,this.i=2,this.pars=[]}function I_fcall(a,b){return cont(new EF_Fcall(a,b),0)}function EF_If(a,b){this.ndata=a,this.env=b}function I_if(a,b){return cont(new EF_If(a,b),0)}function EF_Switch(a,b){this.ndata=a,this.env=b,this.phase=0}function I_switch(a,b){return cont(new EF_Switch(a,b),0)}function EF_Try(a,b){this.ndata=a,this.env=b,this.state=0}function I_try(a,b){return cont(new EF_Try(a,b),0)}function EF_Loop(a,b){this.ndata=a,this.env=b}function I_loop(a,b){return cont(new EF_Loop(a,b),a[0],!0)}function EF_ForIn(a,b){this.ndata=a,this.env=b}function I_forin(a,b){return cont(new EF_ForIn(a,b),0)}function EF_Par(a,b){this.ndata=a,this.env=b,this.pending=0,this.children=new Array(this.ndata.length)}function I_par(a,b){return cont(new EF_Par(a,b),-1)}function EF_Alt(a,b){this.ndata=a,this.env=b,this.pending=0,this.children=new Array(this.ndata.length)}function I_alt(a,b){return cont(new EF_Alt(a,b),-1)}function EF_Suspend(a,b){this.ndata=a,this.env=b}function I_sus(a,b){return cont(new EF_Suspend(a,b),0)}function EF_Spawn(a,b,c,d){this.ndata=a,this.env=b,this.notifyAsync=c,this.notifyVal=d}function EF_SpawnWaitFrame(a){this.waitarr=a,a.push(this)}function I_spawn(a,b){function i(){d=!0}function j(a){if(void 0===c)if(c=a,d=!1,g.length)for(;g.length;)cont(g.shift(),c);else c&&c.__oni_cfx&&("t"!=c.type||c.val instanceof Error)&&setTimeout(function(){f||c.mapToJS(!0)},0)}var c,d,f=!1,g=[],h={abort:function(){if(d)for(k.quench(),k.abort(),d=!1,c=new CFException("t",new StratumAborted,a[0],b.file);g.length;)cont(g.shift(),c)},value:function(){return d?new EF_SpawnWaitFrame(g):(f=!0,c)},waitforValue:function(){return this.value()},running:function(){return d},waiting:function(){return g.length},toString:function(){return"[object Stratum]"}},k=new EF_Spawn(a,b,i,j);return cont(k,0),h}function EF_Collapse(a,b){this.ndata=a,this.env=b}function I_collapse(a,b){return cont(new EF_Collapse(a,b),0)}function dummy(){}function isStringAndStartsWith(a,b){return"string"==typeof a&&a.substring(0,b.length)===b}function onGlobalMessage(a){if(a.source===exports.G&&isStringAndStartsWith(a.data,MESSAGE_PREFIX)){var c,b=a.data.substring(MESSAGE_PREFIX.length);(c=tasks[b])&&(delete tasks[b],c())}}function QuasiProto(a){this.parts=a}var UNDEF,token_oniE={},CFETypes={r:"return",b:"break",c:"continue",blb:"blocklambda break"};CFException.prototype={__oni_cfx:!0,toString:function(){return this.type in CFETypes?"Unexpected "+CFETypes[this.type]+" statement":"Uncaught internal SJS control flow exception ("+this.type+":: "+this.val+")"},mapToJS:function(a){if("t"!=this.type)throw this.ef?this:new Error(this.toString());if(!a||!this.val.__oni_stack)throw this.val;var b=window.onerror,c=!1,d=this.val.toString();b&&(c=b.call(window,d,"",0,0,this.val)),c||console&&(console.error?console.error(d):console.log(d))}},ReturnToParentContinuation.prototype={__oni_rtpc:!0,execute:function(){return this.frame.cont(this.idx,this.val)}},exports.is_ef=is_ef;var EF_Proto={toString:function(){return"<suspended SJS>"},__oni_ef:!0,wait:function(){return this},setChildFrame:function(a,b){this.child_frame&&this.child_frame.callstack&&mergeCallstacks(a,this.child_frame),this.async=!0,this.child_frame=a,a.parent=this,a.parent_idx=b},quench:function(){this.child_frame&&this.child_frame.quench()},abort:function(){return this.aborted=!0,this.child_frame?this.child_frame.abort():this},returnToParent:function(a){return a&&a.__oni_cfx&&"t"==a.type&&this.callstack&&a.val.__oni_stack&&(a.val.__oni_stack=a.val.__oni_stack.concat(this.callstack)),this.swallow_r&&(a&&a.__oni_cfx?"r"==a.type&&(a.ef&&a.ef!=this||(a=a.val)):is_ef(a)?a.swallow_r=this.swallow_r:2!==this.swallow_r&&(a=UNDEF)),this.unreturnable=!0,this.async?this.parent?new ReturnToParentContinuation(this.parent,this.parent_idx,a):(a&&a.__oni_cfx&&a.mapToJS(!0),void 0):a}},token_dis={};exports.ex=execIN,exports.exseq=function(a,b,c,d){var e=I_seq(d,new Env(a,b,c));return e&&e.__oni_cfx?e.mapToJS():e},exports.exbl=function(a,b){var c=I_seq(b,a);return c&&c.__oni_cfx?c.mapToJS():c};var StratumAborted=exports.StratumAborted=function(){};StratumAborted.prototype=new Error("stratum aborted"),exports.C=function(a,b){return{exec:I_call,ndata:[a,b],__oni_dis:token_dis}},exports.Nb=function(a,b){return{exec:I_nblock,ndata:[a,b],__oni_dis:token_dis}},exports.Bl=function(a){return{exec:I_blocklambda,ndata:a,__oni_dis:token_dis}},setEFProto(EF_Seq.prototype={}),EF_Seq.prototype.cont=function(a,b){if(!is_ef(b)){if(b&&b.__oni_cfx){if("blb"!=b.type||b.ef!=this.env.blscope)return this.returnToParent(b);b=UNDEF}for(;a<this.ndata.length;){if(this.sc&&a>1)if(2==this.sc){if(b)break}else if(!b)break;if(this.child_frame=null,b=execIN(this.ndata[a],this.env),this.aborted&&is_ef(b))return b.quench(),b=b.abort(),this.returnToParent(b);if(++a==this.ndata.length&&this.tailcall)break;if(b&&b.__oni_cfx){"blb"===b.type&&b.ef===this.env.blscope&&(b=void 0);break}if(is_ef(b))return this.setChildFrame(b,a),this}return this.returnToParent(b)}this.setChildFrame(b,a)},exports.Seq=function(){return{exec:I_seq,ndata:arguments,__oni_dis:token_dis}},setEFProto(EF_Sc.prototype={}),EF_Sc.prototype.cont=function(a,b){if(!is_ef(b)){if(b&&b.__oni_cfx)return this.returnToParent(b);this.child_frame=null,1==a&&this.pars.push(b);for(var c;this.i<this.ndata.length;){if(c=execIN(this.ndata[this.i],this.env),this.aborted&&is_ef(c))return c.quench(),c=c.abort(),this.returnToParent(c);if(++this.i,c&&c.__oni_cfx)return this.returnToParent(c);if(is_ef(c))return this.setChildFrame(c,1),this;this.pars.push(c)}this.child_frame=null;try{c=this.ndata[1].apply(this.env,this.pars)}catch(d){c=new CFException("t",d,this.ndata[0],this.env.file)}return this.returnToParent(c)}this.setChildFrame(b,a)},exports.Sc=function(){return{exec:I_sc,ndata:arguments,__oni_dis:token_dis}},setEFProto(EF_Fcall.prototype={}),EF_Fcall.prototype.cont=function(idx,val){if(!is_ef(val)){if(val&&val.__oni_cfx)return this.returnToParent(val);if(2==idx)return this.returnToParent(this.o);1==idx&&(3==this.i?this.l=val:this.pars.push(val));for(var rv;this.i<this.ndata.length;){if(rv=execIN(this.ndata[this.i],this.env),this.aborted&&is_ef(rv))return rv.quench(),rv=rv.abort(),this.returnToParent(rv);if(++this.i,rv&&rv.__oni_cfx)return this.returnToParent(rv);if(is_ef(rv))return this.child_frame=null,this.setChildFrame(rv,1),this;3==this.i?this.l=rv:this.pars.push(rv)}this.child_frame=null;try{switch(this.ndata[0]){case 0:if("function"==typeof this.l)rv=this.l.apply(null,this.pars);else if(testIsFunction(this.l)){for(var command="this.l(",i=0;i<this.pars.length;++i)i&&(command+=","),command+="this.pars["+i+"]";command+=")",rv=eval(command)}else rv=new CFException("t",new Error("'"+this.l+"' is not a function"),this.ndata[1],this.env.file);break;case 1:if("undefined"==typeof this.l[0])rv=new CFException("t",new Error("'"+this.l[1]+"' on '"+this.l[0]+"' is not a function"),this.ndata[1],this.env.file);else if("function"==typeof this.l[0][this.l[1]])rv=this.l[0][this.l[1]].apply(this.l[0],this.pars);else if("msie"===UA||testIsFunction(this.l[0][this.l[1]])){for(var command="this.l[0][this.l[1]](",i=0;i<this.pars.length;++i)i&&(command+=","),command+="this.pars["+i+"]";command+=")",rv=eval(command)}else rv=new CFException("t",new Error("'"+this.l[0][this.l[1]]+"' is not a function"),this.ndata[1],this.env.file);break;case 2:var ctor=this.l;if(ctor&&(/\{\s*\[native code\]\s*\}\s*$/.test(ctor.toString())||void 0==ctor.apply)){for(var pars=this.pars,command="new ctor(",i=0;i<pars.length;++i)i&&(command+=","),command+="pars["+i+"]";command+=")",rv=eval(command)}else if(testIsFunction(ctor)){var f=function(){};if(f.prototype=ctor.prototype,this.o=new f,rv=ctor.apply(this.o,this.pars),is_ef(rv))return this.setChildFrame(rv,2),this;rv&&-1!="object function".indexOf(typeof rv)||(rv=this.o)}else rv=new CFException("t",new Error("'"+ctor+"' is not a function"),this.ndata[1],this.env.file);break;default:rv=new CFException("i","Invalid Fcall mode")}}catch(e){rv=e&&e.__oni_cfx?"blb"==e.type&&e.ef==this.env.blscope?UNDEF:e:new CFException("t",e,this.ndata[1],this.env.file)}if(is_ef(rv)){if(this.aborted)return rv=rv.abort(),this.returnToParent(rv);rv.callstack||(rv.callstack=[]),rv.callstack.push([this.env.file,this.ndata[1]])}return this.returnToParent(rv)}this.setChildFrame(val,idx)},exports.Fcall=function(){return{exec:I_fcall,ndata:arguments,__oni_dis:token_dis}},setEFProto(EF_If.prototype={}),EF_If.prototype.cont=function(a,b){switch(a){case 0:if(b=execIN(this.ndata[0],this.env),this.aborted&&is_ef(b))return b.quench(),b=b.abort(),this.returnToParent(b);case 1:if(b&&b.__oni_cfx)break;if(is_ef(b))return this.setChildFrame(b,1),this;b=b?execIN(this.ndata[1],this.env):execIN(this.ndata[2],this.env);break;default:b=new CFException("i","invalid state in EF_If")}return this.returnToParent(b)},exports.If=function(a,b,c){return{exec:I_if,ndata:[a,b,c],__oni_dis:token_dis}};var Default={};exports.Default=Default,setEFProto(EF_Switch.prototype={}),EF_Switch.prototype.cont=function(a,b){switch(this.phase){case 0:if(0==a&&(b=execIN(this.ndata[0],this.env),this.aborted&&is_ef(b)))return b.quench(),b=b.abort(),this.returnToParent(b);if(b&&b.__oni_cfx)return this.returnToParent(b);if(is_ef(b))return this.setChildFrame(b,1),this;this.phase=1,this.testval=b,a=-1;case 1:for(;;){if(a>-1){if(b&&b.__oni_cfx)return this.returnToParent(b);if(is_ef(b))return this.setChildFrame(b,a),this;if(b==Default||b==this.testval)break}if(++a>=this.ndata[1].length)return this.returnToParent(null);if(this.child_frame=null,b=execIN(this.ndata[1][a][0],this.env),this.aborted&&is_ef(b))return b.quench(),b=b.abort(),this.returnToParent(b)}this.phase=2,b=0;case 2:for(;;){if(is_ef(b))return this.setChildFrame(b,a),this;if(b&&b.__oni_cfx)return"b"==b.type&&(b=b.val),this.returnToParent(b);if(a>=this.ndata[1].length)return this.returnToParent(b);if(this.child_frame=null,b=execIN(this.ndata[1][a][1],this.env),this.aborted&&is_ef(b))return b.quench(),b=b.abort(),this.returnToParent(b);++a}default:throw new Error("Invalid phase in Switch SJS node")}},exports.Switch=function(a,b){return{exec:I_switch,ndata:[a,b],__oni_dis:token_dis}},setEFProto(EF_Try.prototype={}),EF_Try.prototype.cont=function(a,b){if(!is_ef(b)){switch(this.state){case 0:if(this.state=1,b=execIN(this.ndata[1],this.env),is_ef(b))return this.setChildFrame(b),this;case 1:if(this.state=2,!this.aborted&&this.ndata[2]&&(b&&b.__oni_cfx&&"t"==b.type||1&this.ndata[0])){var c;if(c=1&this.ndata[0]?b&&b.__oni_cfx?[b.val,!0]:[b,!1]:b.val,b=this.ndata[2](this.env,c),this.aborted&&is_ef(b)&&(b=b.abort()),!this.NDATA_TRY_RETRACT_BLOCK&&!this.ndata[3])return this.returnToParent(b);if(is_ef(b))return this.child_frame=null,this.setChildFrame(b),this}case 2:if(this.state=3,this.rv=b,this.aborted&&this.ndata[4]&&(b=execIN(this.ndata[4],this.env),is_ef(b)))return this.child_frame=null,this.setChildFrame(b),this;case 3:if(this.state=4,this.ndata[3]&&(b=execIN(this.ndata[3],this.env),is_ef(b)))return this.child_frame=null,this.setChildFrame(b),this;case 4:!this.rv||!this.rv.__oni_cfx||b&&b.__oni_cfx||(b=this.rv);break;default:b=new CFException("i","invalid state in CF_Try")}return this.returnToParent(b)}this.setChildFrame(b,this.state)},EF_Try.prototype.quench=function(){4!==this.state&&this.child_frame.quench()},EF_Try.prototype.abort=function(){if(this.aborted=!0,4!==this.state){var a=this.child_frame.abort();if(is_ef(a))this.setChildFrame(a);else if(this.parent=UNDEF,cont(this,0)!==this)return}return this},exports.Try=function(){return{exec:I_try,ndata:arguments,__oni_dis:token_dis}},setEFProto(EF_Loop.prototype={}),EF_Loop.prototype.cont=function(a,b){if(is_ef(b))this.setChildFrame(b,a);else for(;;){if(0==a){if(b&&b.__oni_cfx)return this.returnToParent(b);if(b=execIN(this.ndata[1],this.env),this.aborted&&is_ef(b))return b.quench(),b=b.abort(),this.returnToParent(b);if(is_ef(b))return this.child_frame=null,this.setChildFrame(b,2),this;a=2}if(a>1){if(2==a&&(!b||b&&b.__oni_cfx))return this.returnToParent(b);for(;;){if(a>2){if(b&&b.__oni_cfx){if("blb"!=b.type||b.ef!=this.env.blscope){if("b"==b.type)b=UNDEF;else if("c"==b.type){b=UNDEF;break}return this.returnToParent(b)}b=UNDEF}if(a>=this.ndata.length)break}if(this.child_frame=null,b=execIN(this.ndata[a+1],this.env),this.aborted&&is_ef(b))return b.quench(),b=b.abort(),this.returnToParent(b);if(++a,is_ef(b))return this.setChildFrame(b,a),this}a=1}if(this.ndata[2]){if(b=execIN(this.ndata[2],this.env),this.aborted&&is_ef(b))return b.quench(),b=b.abort(),this.returnToParent(b);if(is_ef(b))return this.child_frame=null,this.setChildFrame(b,0),this}a=0}},exports.Loop=function(){return{exec:I_loop,ndata:arguments,__oni_dis:token_dis}},setEFProto(EF_ForIn.prototype={}),EF_ForIn.prototype.cont=function(a,b){if(is_ef(b))this.setChildFrame(b,a);else{if(0==a){if(b=execIN(this.ndata[0],this.env),this.aborted&&is_ef(b))return b.quench(),b=b.abort(),this.returnToParent(b);if(is_ef(b))return this.child_frame=null,this.setChildFrame(b,1),this;a=1}if(1==a){if(b&&b.__oni_cfx)return this.returnToParent(b);for(var c in b)if("undefined"==typeof this.remainingX){if(b=this.ndata[1](this.env,c),b&&b.__oni_cfx){if("b"==b.type)b=UNDEF;else if("c"==b.type){b=UNDEF;continue}return this.returnToParent(b)}is_ef(b)&&(this.remainingX=[])}else this.remainingX.push(c);return is_ef(b)?(this.remainingX||(this.remainingX=[]),this.child_frame=null,this.setChildFrame(b,2),this):this.returnToParent(b)}if(2==a)for(;;){if(b&&b.__oni_cfx){if("b"==b.type)b=UNDEF;else if("c"==b.type&&(b=UNDEF,this.remainingX.length))continue;return this.returnToParent(b)}if(is_ef(b))return this.child_frame=null,this.setChildFrame(b,2),this;if(!this.remainingX.length)return this.returnToParent(b);b=this.ndata[1](this.env,this.remainingX.shift())}}},exports.ForIn=function(a,b){return{exec:I_forin,ndata:[a,b],__oni_dis:token_dis}},setEFProto(EF_Par.prototype={}),EF_Par.prototype.cont=function(a,b){if(!is_ef(b)){if(-1==a)for(var c=0;c<this.ndata.length;++c){if(b=execIN(this.ndata[c],this.env),this.aborted)return is_ef(b)?(++this.pending,this.setChildFrame(b,c),this.quench(),this.abortInner()):this.pendingCFE;if(is_ef(b))++this.pending,this.setChildFrame(b,c);else if(b&&b.__oni_cfx)return this.pendingCFE=b,this.quench(),this.abortInner()}else if(--this.pending,this.children[a]=UNDEF,b&&b.__oni_cfx&&!this.aborted&&("blb"!==b.type||b.ef!==this.env.blscope))return this.pendingCFE=b,this.quench(),this.returnToParent(this.abortInner());if(this.pending<2){if(!this.pendingCFE){if(0==this.pending)return this.returnToParent(b);for(var c=0;c<this.children.length;++c)if(this.children[c])return this.returnToParent(this.children[c]);return this.returnToParent(new CFException("i","invalid state in Par"))}if(0==this.pending)return this.returnToParent(this.pendingCFE)}return this.async=!0,this}this.setChildFrame(b,a)},EF_Par.prototype.quench=function(){if(!this.aborted)for(var a=0;a<this.children.length;++a)this.children[a]&&this.children[a].quench()},EF_Par.prototype.abort=function(){return this.parent=UNDEF,this.aborted?(this.pendingCFE=UNDEF,this):this.abortInner()},EF_Par.prototype.abortInner=function(){this.aborted=!0;for(var a=0;a<this.children.length;++a)if(this.children[a]){var b=this.children[a].abort();is_ef(b)?this.setChildFrame(b,a):(--this.pending,this.children[a]=UNDEF)}return this.pending?(this.async=!0,this):this.pendingCFE},EF_Par.prototype.setChildFrame=function(a,b){this.children[b]&&this.children[b].callstack&&mergeCallstacks(a,this.children[b]),this.children[b]=a,a.parent=this,a.parent_idx=b},exports.Par=function(){return{exec:I_par,ndata:arguments,__oni_dis:token_dis}},setEFProto(EF_Alt.prototype={}),EF_Alt.prototype.cont=function(a,b){if(!is_ef(b)){if(-1==a)for(var c=0;c<this.ndata.length;++c){var d=copyEnv(this.env);if(d.fold=this,d.branch=c,b=execIN(this.ndata[c],d),this.aborted)return is_ef(b)?(++this.pending,this.setChildFrame(b,c),this.quench(),this.abortInner()):this.pendingRV;if(!is_ef(b))return this.pendingRV=b,this.quench(),this.abortInner();++this.pending,this.setChildFrame(b,c)}else{if(--this.pending,this.children[a]=UNDEF,this.collapsing){if(1==this.pending){var e=this.collapsing.cf;this.collapsing=UNDEF,cont(e,1)}return}if(!this.aborted)return this.pendingRV=b,this.quench(),this.returnToParent(this.abortInner());if(0==this.pending)return this.returnToParent(this.pendingRV)}return this.async=!0,this}this.setChildFrame(b,a)},EF_Alt.prototype.quench=function(a){if(!this.aborted)if(this.collapsing)this.children[this.collapsing.branch].quench();else for(var b=0;b<this.children.length;++b)b!==a&&this.children[b]&&this.children[b].quench()},EF_Alt.prototype.abort=function(){return this.parent=UNDEF,this.aborted?(this.pendingRV=UNDEF,this):this.abortInner()},EF_Alt.prototype.abortInner=function(){if(this.aborted=!0,this.collapsing){var a=this.collapsing.branch;this.collapsing=UNDEF;var b=this.children[a].abort();is_ef(b)?this.setChildFrame(b,a):(--this.pending,this.children[a]=UNDEF)}else for(var c=0;c<this.children.length;++c)if(this.children[c]){var b=this.children[c].abort();is_ef(b)?this.setChildFrame(b,c):(--this.pending,this.children[c]=UNDEF)}return this.pending?(this.async=!0,this):this.pendingRV},EF_Alt.prototype.setChildFrame=function(a,b){this.children[b]&&this.children[b].callstack&&mergeCallstacks(a,this.children[b]),this.children[b]=a,a.parent=this,a.parent_idx=b},EF_Alt.prototype.docollapse=function(a,b){this.quench(a);for(var c=0;c<this.children.length;++c)if(c!=a&&this.children[c]){var d=this.children[c].abort();is_ef(d)?this.setChildFrame(d,c):(--this.pending,this.children[c]=UNDEF)}return this.pending<=1?!0:(this.collapsing={branch:a,cf:b},!1)},exports.Alt=function(){return{exec:I_alt,ndata:arguments,__oni_dis:token_dis}},setEFProto(EF_Suspend.prototype={}),EF_Suspend.prototype.cont=function(a,b){if(!is_ef(b)){switch(a){case 0:try{var c=this,d=function(){try{cont(c,2,arguments)}catch(a){var b=function(){throw a};setTimeout(b,0)}};b=this.ndata[0](this.env,d)}catch(e){b=new CFException("t",e)}if(this.returning)return is_ef(b)&&(this.setChildFrame(b,null),this.quench(),b=this.abort(),is_ef(b))?(this.setChildFrame(b,3),this.async=!0,this):cont(this,3,null);if(is_ef(b))return this.setChildFrame(b,1),this;case 1:if(b&&b.__oni_cfx){this.returning=!0;break}return this.suspendCompleted=!0,this.async=!0,this;case 2:if(this.returning)return;if(this.returning=!0,b&&b.__oni_cfx){b=new CFException("i","Suspend: Resume function threw ("+b.toString()+")");break}if(this.retvals=b,!this.suspendCompleted){if(!this.child_frame)return this.returning=!0,void 0;if(this.quench(),b=this.abort(),is_ef(b))return this.setChildFrame(b,3),this}case 3:try{this.ndata[1].apply(this.env,this.retvals),b=UNDEF}catch(e){b=new CFException("i","Suspend: Return function threw ("+e+")")}break;default:b=new CFException("i","Invalid state in Suspend ("+a+")")}return this.returnToParent(b)}this.setChildFrame(b,a)},EF_Suspend.prototype.quench=function(){this.returning=!0,this.suspendCompleted||this.child_frame.quench()},EF_Suspend.prototype.abort=function(){return this.returning=!0,this.suspendCompleted?void 0:this.child_frame.abort()},exports.Suspend=function(a,b){return{exec:I_sus,ndata:[a,b],__oni_dis:token_dis}},setEFProto(EF_Spawn.prototype={}),EF_Spawn.prototype.cont=function(a,b){0==a&&(b=execIN(this.ndata[1],this.env)),is_ef(b)?(this.setChildFrame(b,1),0==a&&this.notifyAsync()):this.notifyVal(b)},EF_Spawn.prototype.abort=function(){if(this.aborted=!0,this.child_frame){var a=this.child_frame.abort();is_ef(a)&&(this.notifyAsync(),this.setChildFrame(a,1))}},setEFProto(EF_SpawnWaitFrame.prototype={}),EF_SpawnWaitFrame.prototype.quench=function(){},EF_SpawnWaitFrame.prototype.abort=function(){var a=this.waitarr.indexOf(this);this.waitarr.splice(a,1)},EF_SpawnWaitFrame.prototype.cont=function(a){this.parent&&cont(this.parent,this.parent_idx,a)},exports.Spawn=function(a,b){return{exec:I_spawn,ndata:[a,b],__oni_dis:token_dis}},setEFProto(EF_Collapse.prototype={}),EF_Collapse.prototype.__oni_collapse=!0,EF_Collapse.prototype.cont=function(a){if(0==a){var c=this.env.fold;return c?c.docollapse(this.env.branch,this)?!0:(this.async=!0,this):new CFException("t",new Error("Unexpected collapse statement"),this.ndata,this.env.file)}return 1==a?this.returnToParent(!0):this.returnToParent(new CFException("t","Internal error in SJS runtime (collapse)",this.ndata,this.env.file))},EF_Collapse.prototype.quench=function(){},EF_Collapse.prototype.abort=function(){},exports.Collapse=function(a){return{exec:I_collapse,ndata:a,__oni_dis:token_dis}},exports.G=window;var hold0,clear0;if(exports.G.setImmediate)hold0=exports.G.setImmediate,clear0=exports.G.clearImmediate;else if(exports.G.postMessage&&!exports.G.importScripts){var postMessageIsAsync=!0,oldOnMessage=exports.G.onmessage;if(exports.G.onmessage=function(){postMessageIsAsync=!1},exports.G.postMessage("","*"),exports.G.onmessage=oldOnMessage,postMessageIsAsync){var MESSAGE_PREFIX="com.onilabs.hold0"+Math.random(),tasks={};exports.G.addEventListener?exports.G.addEventListener("message",onGlobalMessage,!1):exports.G.attachEvent("onmessage",onGlobalMessage);var id_counter=1,hold0=function(a){var b=id_counter++;return tasks[b]=a,exports.G.postMessage(MESSAGE_PREFIX+b,"*"),b},clear0=function(a){delete tasks[a]}}}hold0||(hold0=function(a){return setTimeout(a,0)},clear0=clearTimeout),exports.Hold=function(a){if(a===UNDEF)return{__oni_ef:!0,wait:function(){return this},quench:dummy,abort:dummy};if(0===a){var b={__oni_ef:!0,wait:function(){return this},abort:dummy,quench:function(){b=null,clear0(this.co)},co:hold0(function(){b&&b.parent&&cont(b.parent,b.parent_idx,UNDEF)})};return b}var b={__oni_ef:!0,wait:function(){return this},abort:dummy,quench:function(){b=null,clearTimeout(this.co)}};return b.co=setTimeout(function(){b&&b.parent&&cont(b.parent,b.parent_idx,UNDEF)},a),b},exports.Throw=function(a,b,c){return new CFException("t",a,b,c)},exports.Arr=function(){return Array.prototype.slice.call(arguments,0)},exports.Obj=function(){for(var a=new Object,b=0;b<arguments[0].length;++b)a[arguments[0][b]]=arguments[b+1];return a},exports.QuasiProto=QuasiProto,exports.Quasi=function(){return new QuasiProto(Array.prototype.slice.call(arguments,0))},exports.Return=function(a){return new CFException("r",a)},exports.Break=function(a){return new CFException("b",a)},exports.Cont=function(a){return new CFException("c",a)},exports.BlBreak=function(a,b){var c=new CFException("blb",b);if(!a.blbref)throw new Error("Internal runtime error; no reference frame in BlBreak");if(a.blbref.unreturnable&&!a.blbref.toplevel)throw new Error("Blocklambda break to inactive scope");return c.ef=a.blbref,c},exports.BlReturn=function(a){var b=new CFException("r",a);if(!this.blrref)throw new Error("Internal runtime error; no reference frame in BlReturn");if(this.blrref.unreturnable)throw this.blrref.toplevel?new Error("Invalid blocklambda 'return' statement; 'return' is only allowed in blocklambdas that are nested in functions"):new Error("Blocklambda return to inactive function");return b.ef=this.blrref,b},exports.With=function(a,b){return b(this,a)},exports.join_str=function(){for(var a="",b=0,c=arguments.length;c>b;++b)a+=arguments[b];return a},exports.infix={"+":function(a,b){return a+b},"-":function(a,b){return a-b},"*":function(a,b){return a*b},"/":function(a,b){return a/b},"%":function(a,b){return a%b},"<<":function(a,b){return a<<b},">>":function(a,b){return a>>b},">>>":function(a,b){return a>>>b},"<":function(a,b){return b>a},">":function(a,b){return a>b},"<=":function(a,b){return b>=a},">=":function(a,b){return a>=b},"==":function(a,b){return a==b},"!=":function(a,b){return a!=b},"===":function(a,b){return a===b},"!==":function(a,b){return a!==b},"&":function(a,b){return a&b},"^":function(a,b){return a^b},"|":function(a,b){return a|b},",":function(a,b){return b},"instanceof":function(a,b){return a instanceof b},"in":function(a,b){return a in b}};var UA=navigator.userAgent.toLowerCase();UA=UA.indexOf(" chrome/")>=0?"chrome":UA.indexOf(" firefox/")>=0?"firefox":UA.indexOf(" safari/")>=0?"safari":UA.indexOf(" msie ")>=0?"msie":"unknown",exports.hostenv="xbrowser",exports.UA=UA,exports.modules={},exports.modsrc={}}(__oni_rt),function(a){function b(a,b){if(a.decl_scopes.push({vars:[],funs:"",fscoped_ctx:0,bl:b,continue_scope:0,break_scope:0}),b){var c=a.decl_scopes[a.decl_scopes.length-2];c.notail=!0}}function c(a){var b="";return a.vars.length&&(b+="var "+a.vars.join(",")+";"),b+=a.funs}function d(a){return a.decl_scopes[a.decl_scopes.length-1]}function e(a){a.stmt_scopes.push({seq:[]})}function f(a,b,c){var d=a.stmt_scopes.pop().seq,e="";if(d.length)if(0==a.js_ctx){b&&(e+=b);for(var f=0;f<d.length;++f){var g=d[f].v();g.length&&((f||b)&&(e+=","),e+=g)}c&&(e+=c)}else for(var f=0;f<d.length;++f)e+=d[f].nb();return e}function g(a){return a.stmt_scopes[a.stmt_scopes.length-1]}function h(a){switch(a.mode){case"debug":a.allow_nblock=!1,a.full_nblock=!1;break;case"optimize":a.allow_nblock=!0,a.full_nblock=!0;break;case"normal":default:a.allow_nblock=!0,a.full_nblock=!1}if("undefined"!=typeof a.scopes)throw new Error("Internal parser error: Nested script");a.decl_scopes=[],a.stmt_scopes=[],a.js_ctx=0,b(a),e(a)}function i(a,b){if(a!=A)if(a.is_compound_stmt)for(var c=0;c<a.stmts.length;++c)i(a.stmts[c],b);else{if(a.is_var_decl){if(a.collect_var_decls(d(b).vars),a.is_empty)return}else if(a.is_fun_decl)return d(b).funs+=a.fun_decl(),void 0;var e=g(b).seq;if(a.is_nblock&&0==b.js_ctx){var f=e.length?e[e.length-1]:null;f&&f.is_nblock_seq||(f=new s(b),e.push(f)),f.pushStmt(a)}else e.push(a)}}function j(a){var b=a.decl_scopes.pop(),d=c(b)+f(a,(a.globalReturn?"return ":"")+"__oni_rt.exseq(this.arguments,this,"+a.filename+",["+24,"])");return d}function k(a){switch(g(a).seq.length){case 1:var b=a.stmt_scopes.pop().seq[0];return b.is_var_decl=!1,b;case 0:return a.stmt_scopes.pop(),A;default:return new n(f(a))}}function l(a,b,c){var d="__oni_rt.Nb(function(){";return b&&(d+="return "),d+a+"},"+(c||0)+")"}function m(){}function n(a){this.seq=a}function o(a,b){this.exp=a,this.clauses=b}function p(a,b,c,d,e){this.is_nblock=d.allow_nblock,e&&d.js_ctx&&(c="return "+c),this.code="function "+a+T(b)+c+"}"}function q(a,b,c,e){return d(e).fscoped_ctx?w([[new X(a,e),new p("",b,c,e)]],e):new r(a,b,c,e)}function r(a,b,c){this.code="function "+a+T(b)+c+"}"}function s(){this.stmts=[]}function t(a){this.stmts=[],this.pctx=a}function u(a){this.exp=a,this.line=this.exp.line,this.is_nblock=a.is_nblock}function v(a,b){for(var c=new t(b),d=0;d<a.length;++d)c.stmts.push(new x(a[d],b));return c}function w(a,b){return v(a,b).toBlock()}function x(a,b){this.d=a,this.d[0].is_id||(this.is_dest=!0),this.is_empty=this.d.length<2,this.pctx=b,this.line=b.line,this.is_empty||(this.is_nblock=b.allow_nblock&&a[1].is_nblock&&!this.is_dest)}function y(a,b,c,d){this.t=a,this.c=b,this.a=c,this.line=a.line,this.file=d.filename,this.is_nblock=d.full_nblock&&a.is_nblock&&b.is_nblock&&(!c||c.is_nblock)}function z(a,b,c){this.block=a,this.crf=b,this.file=c.filename}function B(a,b){this.exp=a,this.line=a.line,this.file=b.filename,this.is_nblock=b.full_nblock&&a.is_nblock}function C(a,b){this.line=b.line,this.exp=a}function D(a,b){this.line=b.line-b.newline,this.exp=a,this.js_ctx=b.js_ctx,this.is_nblock=b.allow_nblock&&(a?a.is_nblock:!0)}function E(a){this.line=a.line}function F(a,b,c){this.f=a,this.lbl=c,this.is_nblock=!0,this.js_ctx=b.js_ctx}function G(a,b){this.line=a.line,this.lbl=b,this.is_nblock=!0}function H(a,b,c,d,e,f){var g;return a||b?(g=b?v(b,f):new t(f),a&&g.stmts.push(new u(a,f)),g.stmts.push(new I(0,c,e,d)),g=g.toBlock()):g=new I(0,c,e,d),g}function I(a,b,c,d){this.init_state=a,this.test_exp=b,this.inc_exp=d,this.body=c}function J(a,b,c,d,e){var f;return b?(f=v([b],e),f.stmts.push(new K(b[0],c,d,e)),f=f.toBlock()):f=new K(a,c,d,e),f}function K(a,b,c,d){this.lhs=a,this.obj=b,this.body=c,this.pctx=d}function L(a,b,c){this.exp=a,this.body=b,this.line=this.exp.line,this.file=c.filename,this.is_nblock=c.allow_nblock&&a.is_nblock&&b.is_nblock}function M(a,b){this.value=a,this.line=b.line}function N(a,b,c,d){this.left=a,this.id=b,this.right=c,this.line=d.line,this.is_nblock=d.allow_nblock&&a.is_nblock&&c.is_nblock}function O(a,b){this.is_nblock=b.allow_nblock,this.line=b.line,this.parts=a;for(var c=0,d=a.length;d>c;++c)if(Array.isArray(a[c])&&!a[c][0].is_nblock){this.is_nblock=!1;break}}function P(a,b){this.parts=a,this.line=b.line,this.is_nblock=!1}function Q(a,b,c,d){if(!a.is_ref&&!a.is_id&&(this.is_dest=!0,"="!=b))throw new Error("Invalid operator in destructuring assignment");this.left=a,this.id=b,this.right=c,this.line=d.line,this.is_nblock=d.allow_nblock&&a.is_nblock&&c.is_nblock&&!this.is_dest}function R(a,b,c){this.id=a,this.right=b,this.line=c.line,this.is_nblock=c.allow_nblock&&b.is_nblock&&"spawn"!=a}function S(a,b,c){if(!a.is_ref&&!a.is_id)throw new Error("Invalid argument for postfix op '"+b+"'");
this.left=a,this.id=b,this.line=c.line,this.is_nblock=c.allow_nblock&&a.is_nblock}function T(a){var b="",c=!0,d=[];if(!a.length)return"(){";var e="";try{for(var f=0;f<a.length;++f)!c||a[f]instanceof X||(c=!1),a[f].collect_var_decls(d),e+=a[f].destruct("arguments["+f+"]");return c?"("+d.join(",")+"){":(d.length&&(b+="var "+d.join(",")+";"),b+=e,"(){"+b)}catch(g){throw new Error("Invalid syntax in parameter list")}}function U(a,b,c,d){this.is_nblock=c.allow_nblock,this.js_ctx=c.js_ctx,this.line=c.line,this.bound=d,this.code="function";var e=[];a&&(a.collect_pars?a.collect_pars(e):e.push(a)),this.code+=T(e),this.code+=c.js_ctx?"return "+b.nb()+"}":"return __oni_rt.exseq(arguments,this,"+c.filename+",["+33+","+b.v()+"])}"}function V(a,b,c){return b.is_fun_call?(b.args.unshift(a),b.is_nblock||(b.nblock_form=!1),b):new $(b,[a],c)}function W(a,b){if("hold"==a){var c=new M("__oni_rt.Hold",b);return c.is_id=!0,c}return"arguments"==a?new Y("arguments","aobj",b):new X(a,b)}function X(a,b){this.name=a,this.line=b.line}function Y(a,b,c){this.js_ctx=c.js_ctx,this.line=c.line,this.name=a,this.ename=b}function Z(a){for(var b=0;b<a.length;++b)if(!a[b].is_nblock)return!1;return!0}function $(a,b,c){this.l=a,this.args=b,this.nblock_form=a.is_nblock&&Z(b),this.line=c.line}function _(a,b,c){this.l=a,this.name=b,this.line=c.line,this.is_nblock=c.allow_nblock&&a.is_nblock}function ab(a,b,c){this.l=a,this.idxexp=b,this.line=c.line,this.is_nblock=c.allow_nblock&&a.is_nblock&&b.is_nblock}function bb(a,b){this.e=a,this.is_nblock=b.allow_nblock&&a.is_nblock}function cb(a,b){this.elements=a,this.line=b.line,this.is_nblock=b.allow_nblock&&Z(a)}function db(a,b){this.props=a,this.line=b.line,this.is_nblock=b.allow_nblock&&function(){for(var b=0;b<a.length;++b)if(!a[b][2].is_nblock)return!1;return!0}()}function eb(a){return"'"==a.charAt(0)||'"'==a.charAt(0)?a:'"'+a+'"'}function fb(a,b,c,d){this.t=a,this.c=b,this.a=c,this.line=a.line,this.is_nblock=d.allow_nblock&&a.is_nblock&&b.is_nblock&&(void 0===c||c.is_nblock)}function gb(a,b){this.exp=a,this.args=b,this.line=a.line}function hb(a,b,c,d){return c[0]||c[1]||c[2]?new z(new ib(a,b),c,d):new ib(a,b)}function ib(a,b){this.op=a,this.blocks=b}function jb(a,b,c,d,e){var f;return a?(f=v(b,e),f.stmts.push(kb(b,c,d,e)),f=f.toBlock()):f=kb(b,c,d,e),f}function kb(a,b,c,d){var e=c[0]||c[1]||c[2],f=new lb(a,b,e,d);return e&&(f=new mb(new z(f,c,d).v(),d)),f}function lb(a,b,c,d){this.decls=a,this.block=b,this.wrapped=c,this.file=d.filename}function mb(a,b){this.code=a,this.line=b.line,this.file=b.filename}function nb(a,b,c,d,e){var f;if(a){if(!b.is_id)throw new Error("Variable name expected in 'using' expression");f=v([[b]],e),f.stmts.push(new ob(b,c,d,e)),f=f.toBlock()}else f=new ob(b,c,d,e);return f}function ob(a,b,c,d){this.line=d.line,this.body=c,this.assign1=new Q(new X("_oniW",d),"=",b,d),a&&(this.assign2=new Q(a,"=",new X("_oniW",d),d))}function pb(a,b){this.code="__oni_rt.Bl(function"+T(a)+b+"})"}function qb(a,b){this.lbl=a,this.stmt=b}function rb(){}function wb(){}function xb(a,b){this.id=a,this.value=b}function yb(a){"@"===a.charAt(0)?(this.alternate=!0,this.id="<@id>",this.value=a.substr(1)):this.value=a}function Ab(a,b){var c=new wb;return c.id=a,b&&(c.tokenizer=b),zb.put(a,c),c}function Bb(a,b){var c=a.id;if("<@id>"==c)return"@"+a.value;if("<id>"==c||"<string>"==c||"<number>"==c)return a.value;if('"'==c){if("<string>"!=(a=Tb(b)).id||'istr-"'!=Tb(b,void 0,ub).id)throw new Error("Non-literal strings can't be used as property names ("+a+")");return'"'+a.value+'"'}throw new Error("Invalid object literal syntax; property name expected, but saw "+a)}function Cb(a){for(e(a);"}"!=a.token.id;){var b=Qb(a);i(b,a)}return Tb(a,"}"),k(a)}function Db(a){for(b(a,!0),e(a);"}"!=a.token.id;){var d=Qb(a);i(d,a)}Tb(a,"}");var g=a.decl_scopes.pop(),h=65;return g.notail&&(h+=8),c(g)+f(a,"return __oni_rt.exbl(this,["+h,"])")}function Eb(a,b){var c;"||"==a?(c=[],Tb(b)):c=Hb(b,"|","|");var d=Db(b);return new pb(c,d,b)}function Fb(a,d){for(b(a),e(a),Tb(a,"{");"}"!=a.token.id;){var g=Qb(a);i(g,a)}Tb(a,"}");var h=a.decl_scopes.pop(),j=1;return h.notail&&(j+=8),d&&(j+=32),c(h)+f(a,"return __oni_rt.exseq(arguments,this,"+a.filename+",["+j,"])")}function Gb(a){var b=a.token;Tb(a);for(var c=b.exsf(a);"|"!=a.token.id&&a.token.excbp>110;)b=a.token,Tb(a),c=b.excf(c,a);return c}function Hb(a,b,c){b||(b="(",c=")");var d=[];for(Tb(a,b);a.token.id!=c;){switch(d.length&&Tb(a,","),a.token.id){case"{":case"[":d.push(Gb(a));break;case"<id>":d.push(a.token.exsf(a)),Tb(a);break;default:throw new Error("Expected function parameter but found '"+a.token+"'")}token=a.token}return Tb(a,c),d}function Ib(a){var b=Tb(a);if("<id>"!==a.token.id&&"<@id>"!==a.token.id)throw new Error("Unexpected "+a.token+" in quasi template");if("("!=a.src.charAt(a.lastIndex))return b.exsf(a);Tb(a),Tb(a,"(");for(var c=[];")"!=a.token.id;)c.length&&Tb(a,","),c.push(Rb(a,110));return new $(b.exsf(a),c,a)}function Jb(a){return";"==a.id||"}"==a.id||"<eof>"==a.id}function Kb(a){"}"==a.token.id||"<eof>"==a.token.id||a.newline||Tb(a,";")}function Lb(a,b){var c=[],d=b?Sb:Rb;do{c.length&&Tb(a,",");var e=d(a,120);if("="==a.token.id){Tb(a);var f=d(a,110);c.push([e,f])}else c.push([e])}while(","==a.token.id);return c}function Mb(a){var b=[],c=null;if("catch"==a.token.id||"catchall"==a.token.value){var d="catchall"==a.token.value;c=[],Tb(a),c.push(Tb(a,"(").value),Tb(a,"<id>"),Tb(a,")"),Tb(a,"{"),c.push(Cb(a)),c.push(d)}return b.push(c),"retract"==a.token.value?(Tb(a),Tb(a,"{"),b.push(Cb(a))):b.push(null),"finally"==a.token.id?(Tb(a),Tb(a,"{"),b.push(Cb(a))):b.push(null),b}function Nb(a,b){var c={src:a,line:1,lastIndex:0,token:null};if(b)for(var d in b)c[d]=b[d];return c}function Ob(a,b){var c=Nb(a+"\n",b);try{return Pb(c)}catch(d){var e=d.mes||d,f=d.line||c.line,g=new Error("SJS syntax error "+(c.filename?"in "+c.filename+",":"at")+" line "+f+": "+e);throw g.compileError={message:e,line:f},g}}function Pb(a){for(h(a),Tb(a);"<eof>"!=a.token.id;){var b=Qb(a);i(b,a)}return j(a)}function Qb(a){var b=a.token;if(Tb(a),b.stmtf)return b.stmtf(a);if("<id>"==b.id&&":"==a.token.id){Tb(a);var c=Qb(a);return new qb(b.value,c)}var d=Rb(a,0,b);return Kb(a),new u(d,a)}function Rb(a,b,c){b=b||0,c||(c=a.token,Tb(a));for(var d=c.exsf(a);b<a.token.excbp;){if(c=a.token,a.newline&&c.asi_restricted)return d;Tb(a),d=c.excf(d,a)}return d}function Sb(a,b,c){b=b||0,c||(c=a.token,Tb(a));for(var d=c.exsf(a);b<a.token.excbp&&"in"!=a.token.id;){if(c=a.token,a.newline&&c.asi_restricted)return d;Tb(a),d=c.excf(d,a)}return d}function Tb(a,b,c){if(c||(c=a.token?a.token.tokenizer:sb),b&&(!a.token||a.token.id!=b))throw new Error("Unexpected "+a.token);for(a.token=null,a.newline=0;!a.token;){c.lastIndex=a.lastIndex;var d=c.exec(a.src);if(!d){a.token=zb.lookup("<eof>");break}if(a.lastIndex=c.lastIndex,c==sb)if(d[4])a.token=zb.lookup(d[4]),a.token||(a.token=new yb(d[4]));else if(d[1]){var e=d[1].match(/(?:\r\n|\n|\r)/g);e&&(a.line+=e.length,a.newline+=e.length)}else if(d[5])a.token=new xb("<string>",d[5]);else if(d[6]){var f=d[6],e=f.match(/(?:\r\n|\n|\r)/g);a.line+=e.length,a.newline+=e.length,f=f.replace(/\\(?:\r\n|\n|\r)/g,"").replace(/(?:\r\n|\n|\r)/g,"\\n"),a.token=new xb("<string>",f)}else if(d[2])a.token=new xb("<number>",d[2]);else{if(!d[3])throw d[7]?new Error("Unexpected characters: '"+d[7]+"'"):new Error("Internal scanner error");a.token=new xb("<regex>",d[3])}else if(c==tb)if(d[2])a.token=zb.lookup(d[2]),a.token||(a.token=new yb(d[2]));else if(d[1]){var e=d[1].match(/(?:\r\n|\n|\r)/g);e&&(a.line+=e.length,a.newline+=e.length)}else c=sb;else if(c==ub)d[1]?a.token=new xb("<string>",d[1]):d[2]?(++a.line,++a.newline):d[3]?(++a.line,++a.newline,a.token=new xb("<string>","\\n")):d[4]&&(a.token=zb.lookup("istr-"+d[4]));else{if(c!=vb)throw new Error("Internal scanner error: no tokenizer");d[1]?a.token=new xb("<string>",d[1]):d[2]?(++a.line,++a.newline):d[3]?(++a.line,++a.newline,a.token=new xb("<string>","\\n")):d[4]&&(a.token=zb.lookup("quasi-"+d[4]))}}return a.token}m.prototype={is_nblock:!1,v:function(a){return this.is_nblock&&this.nblock_val?l(this.nblock_val(),this.is_value,this.line):this.val(a)},nb:function(){if(this.nblock_val)return this.nblock_val();throw new Error("Illegal statement in __js block")}},n.prototype=new m,n.prototype.nblock_val=function(){return this.seq},n.prototype.val=function(a){return this.seq.length?a?this.seq:"__oni_rt.Seq(0,"+this.seq+")":"0"},o.prototype=new m,o.prototype.nblock_val=function(){for(var a="switch("+this.exp.nb()+"){",b=0,c=this.clauses.length;c>b;++b){var d=this.clauses[b];a+=(d[0]?"case "+d[0].nb()+":":"default:")+d[1].nb()}return a+"}"},o.prototype.val=function(){for(var a="[",b=0,c=this.clauses.length;c>b;++b){var d=this.clauses[b];b&&(a+=","),a+="["+(d[0]?d[0].v():"__oni_rt.Default")+","+d[1].v()+"]"}return a+="]","__oni_rt.Switch("+this.exp.v()+","+a+")"},p.prototype=new m,p.prototype.v=function(){return this.code},p.prototype.nblock_val=function(){return this.code},r.prototype=new m,r.prototype.is_fun_decl=!0,r.prototype.fun_decl=function(){return this.code},s.prototype=new m,s.prototype.is_nblock=!0,s.prototype.is_nblock_seq=!0,s.prototype.pushStmt=function(a){this.stmts.push(a),"undefined"==typeof this.line&&(this.line=this.stmts[0].line)},s.prototype.nblock_val=function(){for(var a="",b=0;b<this.stmts.length-1;++b)a+=this.stmts[b].nb();return this.stmts[b].is_value&&(a+="return "),a+=this.stmts[b].nb()},t.prototype=new m,t.prototype.is_compound_stmt=!0,t.prototype.toBlock=function(){return e(this.pctx),i(this,this.pctx),k(this.pctx)},u.prototype=new m,u.prototype.is_value=!0,u.prototype.nblock_val=function(){return this.exp.nb()+";"},u.prototype.v=function(a){return this.exp.v(a)},x.prototype=new m,x.prototype.is_var_decl=!0,x.prototype.collect_var_decls=function(a){try{this.d[0].collect_var_decls(a)}catch(b){throw new Error("Invalid syntax in variable declaration")}},x.prototype.nblock_val=function(){return this.d[0].name+"="+this.d[1].nb()+";"},x.prototype.val=function(){return this.is_dest?new Q(this.d[0],"=",this.d[1],this.pctx).val():"__oni_rt.Sc("+this.line+",function(_oniX){return "+this.d[0].name+"=_oniX;},"+this.d[1].v()+")"},y.prototype=new m,y.prototype.nblock_val=function(){var a="if("+this.t.nb()+"){"+this.c.nb()+"}";return this.a&&(a+="else{"+this.a.nb()+"}"),a},y.prototype.val=function(){var a,b=this.c.v();return this.t.is_nblock?(a="__oni_rt.Nb(function(){if("+this.t.nb()+")return __oni_rt.ex("+b+",this);",this.a&&(a+="else return __oni_rt.ex("+this.a.v()+",this);"),a+"},"+this.line+")"):(a="__oni_rt.If("+this.t.v()+","+b,this.a&&(a+=","+this.a.v()),a+")")},z.prototype=new m,z.prototype.nblock_val=function(){var a="try{"+this.block.nb()+"}";if(this.crf[0]){if(this.crf[0][2])throw new Error("catchall statement not allowed in __js block");a+="catch("+this.crf[0][0]+"){"+this.crf[0][1].nb()+"}"}if(this.crf[1])throw new Error("retract statement not allowed in __js block");return this.crf[2]&&(a+="finally{"+this.crf[2].nb()+"}"),a},z.prototype.val=function(){var a=this.block.v(),b="__oni_rt.Try("+(this.crf[0]&&this.crf[0][2]?1:0);if(b+=","+a,this.crf[0]){var c=this.crf[0][1].v();b+=",function(__oni_env,"+this.crf[0][0]+"){",c.length&&(b+="return __oni_rt.ex("+c+",__oni_env)"),b+="}"}else b+=",0";if(this.crf[2]){var d=this.crf[2].v();b+=","+d}else b+=",0";if(this.crf[1]){var e=this.crf[1].v();b+=","+e}return b+")"};var A=new m;A.is_nblock=!0,A.nblock_val=function(){return";"},A.v=function(){return"0"},B.prototype=new m,B.prototype.nblock_val=function(){return"throw "+this.exp.nb()+";"},B.prototype.val=function(){return"__oni_rt.Sc("+this.line+",__oni_rt.Throw,"+this.exp.v()+","+this.line+","+this.file+")"},C.prototype=new m,C.prototype.val=function(){var a=this.exp?","+this.exp.v():"";return"__oni_rt.Sc("+this.line+",__oni_rt.BlReturn"+a+")"},D.prototype=new m,D.prototype.nblock_val=function(){var a;return this.js_ctx?(a="return",this.exp&&(a+=" "+this.exp.nb()),a+=";"):(a="return __oni_rt.Return(",this.exp&&(a+=this.exp.nb()),a+=");"),a},D.prototype.val=function(){var a=this.exp?","+this.exp.v():"";return"__oni_rt.Sc("+this.line+",__oni_rt.Return"+a+")"},E.prototype=new m,E.prototype.val=function(){return"__oni_rt.Collapse("+this.line+")"},F.prototype=new m,F.prototype.nblock_val=function(){var a;return this.js_ctx?(a="b"==this.f?"break":"continue",this.lbl&&(a+=" "+this.lbl),a+=";"):(a="return __oni_rt."+("b"==this.f?"Break":"Cont")+"(",this.lbl&&(a+="'"+this.lbl+"'"),a+=");"),a},G.prototype=new m,G.prototype.nblock_val=function(){if(this.js_ctx)throw new Error("Blocklamdas cannot contain 'break' statements in __js{...} contexts");var a="return __oni_rt.BlBreak(this";return this.lbl&&(a+=",'"+this.lbl+"'"),a+=");"},I.prototype=new m,I.prototype.nblock_val=function(){if(2==this.init_state)return"do{"+this.body.nb()+"}while("+this.test_exp.nb()+");";if(this.test_exp&&this.inc_exp)return"for(;"+this.test_exp.nb()+";"+this.inc_exp.nb()+"){"+this.body.nb()+"}";if(this.test_exp)return"while("+this.test_exp.nb()+"){"+this.body.nb()+"}";throw new Error("Can't encode this loop as __js yet")},I.prototype.val=function(){var a=this.test_exp?this.test_exp.v():"1",b=this.body.v(!0);return"__oni_rt.Loop("+this.init_state+","+a+","+(this.inc_exp?this.inc_exp.v():"0")+","+b+")"},K.prototype=new m,K.prototype.nblock_val=function(){return"for("+this.lhs.nb()+" in "+this.obj.nb()+"){"+this.body.nb()+"}"},K.prototype.val=function(){var a="__oni_rt.ForIn("+this.obj.v();return a+=",function(__oni_env, _oniY) { return __oni_rt.ex(__oni_rt.Seq(0,",a+=new Q(this.lhs,"=",new X("_oniY",this.pctx),this.pctx).v(),this.body&&(a+=","+this.body.v()),a+"), __oni_env)})"},L.prototype=new m,L.prototype.nblock_val=function(){return"with("+this.exp.nb()+")"+this.body.nb()},L.prototype.val=function(){var a="__oni_rt.Sc("+this.line+",__oni_rt.With,"+this.exp.v()+",function(__oni_env,__oni_z){with(__oni_z) return __oni_rt.ex("+this.body.v()+",__oni_env)})";return a},M.prototype=new m,M.prototype.is_nblock=!0,M.prototype.v=function(){return this.value},M.prototype.nblock_val=function(){return this.value},M.prototype.destruct=function(){if(""!=this.value)throw new Error("invalid pattern");return""},M.prototype.collect_var_decls=function(){},N.prototype=new m,N.prototype.is_value=!0,N.prototype.collect_pars=function(a){if(","!=this.id)throw new Error("invalid parameter list syntax");a.push(this.left),this.right.collect_pars?this.right.collect_pars(a):a.push(this.right)},N.prototype.nblock_val=function(){return this.left.nb()+" "+this.id+" "+this.right.nb()},N.prototype.val=function(){return this.is_nblock?l(this.nb(),!0,this.line):"||"==this.id?"__oni_rt.Seq(2,"+this.left.v()+","+this.right.v()+")":"&&"==this.id?"__oni_rt.Seq(4,"+this.left.v()+","+this.right.v()+")":"__oni_rt.Sc("+this.line+",__oni_rt.infix['"+this.id+"'],"+this.left.v()+","+this.right.v()+")"},O.prototype=new m,O.prototype.is_value=!0,O.prototype.nblock_val=function(){for(var a=0,b=this.parts.length;b>a;++a){var c=this.parts[a];this.parts[a]=Array.isArray(c)?"("+c[0].nb()+")":'"'+c+'"'}return"("+this.parts.join("+")+")"},O.prototype.val=function(){if(this.is_nblock)return l(this.nb(),!0,this.line);for(var a=0,b=this.parts.length;b>a;++a){var c=this.parts[a];this.parts[a]=Array.isArray(c)?c[0].v():'"'+c+'"'}return"__oni_rt.Sc("+this.line+",__oni_rt.join_str,"+this.parts.join(",")+")"},P.prototype=new m,P.prototype.is_value=!0,P.prototype.val=function(){for(var a="__oni_rt.Sc("+this.line+",__oni_rt.Quasi",b=0;b<this.parts.length;++b)a+=b%2?","+this.parts[b].v():',"'+this.parts[b].replace(/\"/g,'\\"')+'"';return a+")"},Q.prototype=new m,Q.prototype.is_value=!0,Q.prototype.nblock_val=function(){var a=this.right.nb();return"__oni_altns"===this.left.name&&(a="Object.create("+a+")"),this.left.nb()+this.id+a},Q.prototype.val=function(){var a;if(this.is_nblock)a=l(this.nb(),!0,this.line);else if(this.is_dest){a="__oni_rt.Sc("+this.line+",function(_oniX";try{for(var b=[],c=this.left.destruct("_oniX",b),d=1;d<=b.length;++d)a+=",_oniX"+d;a+="){"+c+"return _oniX;},"+this.right.v();for(var d=0;d<b.length;++d)a+=","+b[d];a+=")"}catch(e){throw{mes:"Invalid left side in destructuring assignment ",line:this.line}}}else if(!this.left.is_ref||this.left.is_nblock){var f="_oniX";"__oni_altns"===this.left.name&&(f="Object.create("+f+")"),a="__oni_rt.Sc("+this.line+",function(_oniX){return "+this.left.nb()+this.id+f+";},"+this.right.v()+")"}else a="__oni_rt.Sc("+this.line+",function(l, r){return l[0][l[1]]"+this.id+"r;},"+this.left.ref()+","+this.right.v()+")";return a},R.prototype=new m,R.prototype.is_value=!0,R.prototype.nblock_val=function(){return this.id+" "+this.right.nb()},R.prototype.val=function(){var a;return a="spawn"==this.id?"__oni_rt.Spawn("+this.line+","+this.right.v()+")":this.right.is_nblock?l(this.nb(),!0,this.line):this.right.is_ref?"__oni_rt.Sc("+this.line+",function(r){return "+this.id+" r[0][r[1]]},"+this.right.ref()+")":"__oni_rt.Sc("+this.line+",function(r){return "+this.id+" r},"+this.right.v()+")"},S.prototype=new m,S.prototype.is_value=!0,S.prototype.nblock_val=function(){return this.left.nb()+this.id+" "},S.prototype.val=function(){var a;return this.left.is_nblock?a=l(this.nb(),!0,this.line):this.left.is_ref&&(a="__oni_rt.Sc("+this.line+",function(l){return l[0][l[1]]"+this.id+"},"+this.left.ref()+")"),a},U.prototype=new m,U.prototype.v=function(){return this.bound?l(this.nb(),!0,this.line):this.code},U.prototype.nb=function(){return this.bound?"("+this.code+").bind("+(this.js_ctx?"this":"this.tobj")+")":this.code},X.prototype=new m,X.prototype.is_nblock=!0,X.prototype.is_id=!0,X.prototype.is_value=!0,X.prototype.nblock_val=function(){return this.name},X.prototype.destruct=function(a){return"__oni_altns"===this.name&&(a="Object.create("+a+")"),this.name+"="+a+";"},X.prototype.collect_var_decls=function(a){a.push(this.name)},Y.prototype=new m,Y.prototype.is_nblock=!0,Y.prototype.is_id=!0,Y.prototype.is_value=!0,Y.prototype.nblock_val=function(){return this.js_ctx?this.name:"this."+this.ename},Y.prototype.destruct=Y.prototype.collect_var_decls=function(){throw new Error("'"+this.name+"' not allowed in destructuring pattern")},$.prototype=new m,$.prototype.is_value=!0,$.prototype.is_fun_call=!0,$.prototype.nblock_val=function(){for(var a=this.l.nb()+"(",b=0;b<this.args.length;++b)b&&(a+=","),a+=this.args[b].nb();return a+")"},$.prototype.val=function(){var a;if(this.nblock_form){a=this.l.nb()+"(";for(var b=0;b<this.args.length;++b)b&&(a+=","),a+=this.args[b].nb();return"__oni_rt.C(function(){return "+a+")},"+this.line+")"}a=this.l.is_ref?"__oni_rt.Fcall(1,"+this.line+","+this.l.ref():"__oni_rt.Fcall(0,"+this.line+","+this.l.v();for(var b=0;b<this.args.length;++b)a+=","+this.args[b].v();return a+=")"},_.prototype=new m,_.prototype.is_ref=!0,_.prototype.is_value=!0,_.prototype.nblock_val=function(){return this.l.nb()+"."+this.name},_.prototype.val=function(){return"__oni_rt.Sc("+this.line+",function(l){return l."+this.name+";},"+this.l.v()+")"},_.prototype.ref=function(){return"__oni_rt.Sc("+this.line+",function(l){return [l,'"+this.name+"'];},"+this.l.v()+")"},_.prototype.destruct=function(a,b){b.push(this.ref());var c="_oniX"+b.length;return c+"[0]["+c+"[1]]="+a+";"},_.prototype.collect_var_decls=function(){if(!(this.l instanceof X&&"__oni_altns"===this.l.name))throw new Error("var declaration must not contain property accessor as lvalue")},ab.prototype=new m,ab.prototype.is_ref=!0,ab.prototype.is_value=!0,ab.prototype.nblock_val=function(){return this.l.nb()+"["+this.idxexp.nb()+"]"},ab.prototype.val=function(){return"__oni_rt.Sc("+this.line+",function(l, idx){return l[idx];},"+this.l.v()+","+this.idxexp.v()+")"},ab.prototype.ref=function(){return this.is_nblock?"__oni_rt.Nb(function(){return ["+this.l.nb()+","+this.idxexp.nb()+"]},"+this.line+")":"__oni_rt.Sc("+this.line+",function(l, idx){return [l, idx];},"+this.l.v()+","+this.idxexp.v()+")"},bb.prototype=new m,bb.prototype.is_value=!0,bb.prototype.nblock_val=function(){return"("+this.e.nb()+")"},bb.prototype.v=function(a){return this.e.v(a)},bb.prototype.destruct=function(a,b){return this.e.destruct(a,b)},bb.prototype.collect_var_decls=function(a){return this.e.collect_var_decls(a)},bb.prototype.collect_pars=function(a){this.e.collect_pars?this.e.collect_pars(a):a.push(this.e)},cb.prototype=new m,cb.prototype.is_value=!0,cb.prototype.nblock_val=function(){for(var a="[",b=0;b<this.elements.length;++b)b&&(a+=","),a+=this.elements[b].nb();return a+"]"},cb.prototype.val=function(){for(var a="__oni_rt.Sc("+this.line+",__oni_rt.Arr",b=0;b<this.elements.length;++b)a+=","+this.elements[b].v();return a+")"},cb.prototype.destruct=function(a,b){for(var c="",d=0;d<this.elements.length;++d)c+=this.elements[d].destruct(a+"["+d+"]",b);return c},cb.prototype.collect_var_decls=function(a){for(var b=0;b<this.elements.length;++b)this.elements[b].collect_var_decls(a)},db.prototype=new m,db.prototype.is_value=!0,db.prototype.nblock_val=function(){for(var a="{",b=0;b<this.props.length;++b)0!=b&&(a+=","),a+=this.props[b][1]+":"+this.props[b][2].nb();return a+"}"},db.prototype.val=function(){for(var a="__oni_rt.Sc("+this.line+",__oni_rt.Obj, [",b=0;b<this.props.length;++b){if(b&&(a+=","),"pat"==this.props[b][0])throw{mes:"Missing initializer for object property "+eb(this.props[b][1]),line:this.props[b][2]};a+=eb(this.props[b][1])}a+="]";for(var b=0;b<this.props.length;++b)a+=","+this.props[b][2].v();return a+")"},db.prototype.destruct=function(a,b){for(var c="",d=0;d<this.props.length;++d){var g,e=this.props[d],f=e[1];if((g="@"===e[1].charAt(0))&&(f=e[1].slice(1)),"pat"==e[0]){var h=e[1];g&&(h="__oni_altns."+f),c+=h+"="+a+"."+f+";"}else c+=e[2].destruct(a+"["+eb(f)+"]",b)}return c},db.prototype.collect_var_decls=function(a){for(var b=0;b<this.props.length;++b){var c=this.props[b];if("pat"==c[0]){if("@"===c[1].charAt(0))continue;a.push(c[1])}else c[2].collect_var_decls(a)}},fb.prototype=new m,fb.prototype.is_value=!0,fb.prototype.nblock_val=function(){return this.t.nb()+"?"+this.c.nb()+":"+(this.a?this.a.nb():"undefined")},fb.prototype.val=function(){return"__oni_rt.If("+this.t.v()+","+this.c.v()+","+(this.a?this.a.v():"undefined")+")"},gb.prototype=new m,gb.prototype.is_value=!0,gb.prototype.nblock_val=function(){for(var a="new "+this.exp.nb()+"(",b=0;b<this.args.length;++b)b&&(a+=","),a+=this.args[b].nb();return a+")"},gb.prototype.val=function(){for(var a="__oni_rt.Fcall(2,"+this.line+","+this.exp.v(),b=0;b<this.args.length;++b)a+=","+this.args[b].v();return a+=")"},ib.prototype=new m,ib.prototype.is_nblock=!1,ib.prototype.val=function(){var a="__oni_rt.";a+="and"==this.op?"Par(":"Alt(";for(var b=0;b<this.blocks.length;++b){var c=this.blocks[b].v();b&&(a+=","),a+=c}return a+")"},lb.prototype=new m,lb.prototype.val=function(){var a="__oni_rt.Suspend(function(__oni_env,";a+=this.wrapped?"_oniX){resume=_oniX;":"resume){";var b=this.block.v();b.length&&(a+="return __oni_rt.ex("+b+",__oni_env)"),a+="}, function() {";for(var c=0;c<this.decls.length;++c){var d=this.decls[c][0].name;if("arguments"==d)throw new Error("Cannot use 'arguments' as variable name in waitfor()");a+=d+"=arguments["+c+"];"}return a+="})"},mb.prototype=new m,mb.prototype.val=function(){return"__oni_rt.Nb(function(){var resume;return __oni_rt.ex("+this.code+",this)},"+this.line+")"},ob.prototype=new m,ob.prototype.val=function(){var a="__oni_rt.Nb(function(){var _oniW;return __oni_rt.ex(__oni_rt.Seq(0,"+this.assign1.v()+",";return this.assign2&&(a+=this.assign2.v()+","),a+="__oni_rt.Try(0,"+this.body.v()+",0,"+"__oni_rt.Nb(function(){if(_oniW&&_oniW.__finally__)return _oniW.__finally__()},"+this.line+"),0)),this)},"+this.line+")"},pb.prototype=new m,pb.prototype.val=function(){return this.code},qb.prototype=new m,qb.prototype.nblock_val=function(){return this.lbl+": "+this.stmt.nb()},qb.prototype.val=function(){throw new Error("labeled statements not implemented yet")},rb.prototype={lookup:function(a){return this["$"+a]},put:function(a,b){this["$"+a]=b},del:function(a){delete this["$"+a]}};var sb=/(?:[ \f\t\v\u00A0\u2028\u2029]+|\/\/.*|#!.*)*(?:((?:(?:\r\n|\n|\r)|\/\*(?:.|\n|\r)*?\*\/)+)|((?:0[xX][\da-fA-F]+)|(?:(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][-+]?\d+)?))|(\/(?:\\.|\[(?:\\[^\r\n]|[^\n\r\]])*\]|[^\[\/\r\n])+\/[gimy]*)|(==|!=|->|=>|>>|<<|<=|>=|--|\+\+|\|\||&&|\.\.|[-*\/%+&^|]=|[;,?:|^&=<>+\-*\/%!~.\[\]{}()\"`]|[$@_\w]+)|('(?:\\[^\r\n]|[^\\\'\r\n])*')|('(?:\\(?:(?:[^\r\n]|(?:\r\n|\n|\r)))|[^\\\'])*')|(\S+))/g,tb=/(?:[ \f\t\v\u00A0\u2028\u2029]+|\/\/.*|#!.*)*(?:((?:(?:\r\n|\n|\r)|\/\*(?:.|\n|\r)*?\*\/)+)|(>>>=|===|!==|>>>|<<=|>>=|==|!=|->|=>|>>|<<|<=|>=|--|\+\+|\|\||&&|\.\.|[-*\/%+&^|]=|[;,?:|^&=<>+\-*\/%!~.\[\]{}()\"`]|[$@_\w]+))/g,ub=/((?:\\[^\r\n]|\#(?!\{)|[^#\\\"\r\n])+)|(\\(?:\r\n|\n|\r))|((?:\r\n|\n|\r))|(\"|\#\{)/g,vb=/((?:\\[^\r\n]|\$(?![\{a-zA-Z_$@])|[^$\\\`\r\n])+)|(\\(?:\r\n|\n|\r))|((?:\r\n|\n|\r))|(\`|\$\{|\$(?=[a-zA-Z_$@]))/g;wb.prototype={exsf:function(){throw new Error("Unexpected '"+this+"'")},excbp:0,excf:function(){throw new Error("Unexpected '"+this+"'")},stmtf:null,tokenizer:sb,toString:function(){return"'"+this.id+"'"},exs:function(a){return this.exsf=a,this},exc:function(a,b){return this.excbp=a,b&&(this.excf=b),this},stmt:function(a){return this.stmtf=a,this},ifx:function(a,b){return this.excbp=a,b&&(a-=.5),this.excf=function(b,c){var d=Rb(c,a);return new N(b,this.id,d,c)},this},asg:function(a,b){return this.excbp=a,b&&(a-=.5),this.excf=function(b,c){var d=Rb(c,a);return new Q(b,this.id,d,c)},this},pre:function(a){return this.exs(function(b){var c=Rb(b,a);return new R(this.id,c,b)})},pst:function(a){return this.exc(a,function(a,b){return new S(a,this.id,b)})}},xb.prototype=new wb,xb.prototype.tokenizer=tb,xb.prototype.toString=function(){return"literal '"+this.value+"'"},xb.prototype.exsf=function(a){return new M(this.value,a,this.id)},yb.prototype=new xb("<id>"),yb.prototype.exsf=function(a){return this.alternate===!0?this.value.length?new _(new X("__oni_altns",a),this.value,a):new X("__oni_altns",a):W(this.value,a)};var zb=new rb;Ab("[").exs(function(a){for(var b=[];"]"!=a.token.id;)if(b.length&&Tb(a,","),","==a.token.id)b.push(function(a){return new M("",a)}(a));else{if("]"==a.token.id)break;b.push(Rb(a,110))}return Tb(a,"]"),new cb(b,a)}).exc(270,function(a,b){var c=Rb(b);return Tb(b,"]"),new ab(a,c,b)}),Ab(".").exc(270,function(a,b){if("<id>"!=b.token.id)throw new Error("Expected an identifier, found '"+b.token+"' instead");var c=b.token.value;return Tb(b),new _(a,c,b)}),Ab("new").exs(function(a){var b=Rb(a,260),c=[];if("("==a.token.id){for(Tb(a);")"!=a.token.id;)c.length&&Tb(a,","),c.push(Rb(a,110));Tb(a,")")}return new gb(b,c)}),Ab("(").exs(function(a){if(")"==a.token.id){var b=Tb(a,")");if("->"!=b.id&&"=>"!=b.id)throw new Error("Was expecting '->' or '=>' after empty parameter list, but saw '"+a.token.id+"'");return Tb(a),b.exsf(a)}var c=Rb(a);return Tb(a,")"),new bb(c,a)}).exc(260,function(a,b){for(var c=[];")"!=b.token.id;)c.length&&Tb(b,","),c.push(Rb(b,110));if(Tb(b,")"),"{"==b.token.id)for(sb.lastIndex=b.lastIndex;;){var d=sb.exec(b.src);if(!d||"|"!=d[4]&&"||"!=d[4]){if(d&&d[1])continue}else c.push(Eb(Tb(b).id,b));break}return new $(a,c,b)}),Ab("..").exc(255,function(a,b){var c=Rb(b,255);return V(a,c,b)}),Ab("++").pre(240).pst(250).asi_restricted=!0,Ab("--").pre(240).pst(250).asi_restricted=!0,Ab("delete").pre(240),Ab("void").pre(240),Ab("typeof").pre(240),Ab("+").pre(240).ifx(220),Ab("-").pre(240).ifx(220),Ab("~").pre(240),Ab("!").pre(240),Ab("*").ifx(230),Ab("/").ifx(230),Ab("%").ifx(230),Ab("<<").ifx(210),Ab(">>").ifx(210),Ab(">>>").ifx(210),Ab("<").ifx(200),Ab(">").ifx(200),Ab("<=").ifx(200),Ab(">=").ifx(200),Ab("instanceof").ifx(200),Ab("in").ifx(200),Ab("==").ifx(190),Ab("!=").ifx(190),Ab("===").ifx(190),Ab("!==").ifx(190),Ab("&").ifx(180),Ab("^").ifx(170),Ab("|").ifx(160),Ab("&&").ifx(150),Ab("||").ifx(140),Ab("?").exc(130,function(a,b){var c=Rb(b,110);if(":"==b.token.id){Tb(b,":");var d=Rb(b,110)}return new fb(a,c,d,b)}),Ab("=").asg(120,!0),Ab("*=").asg(120,!0),Ab("/=").asg(120,!0),Ab("%=").asg(120,!0),Ab("+=").asg(120,!0),Ab("-=").asg(120,!0),Ab("<<=").asg(120,!0),Ab(">>=").asg(120,!0),Ab(">>>=").asg(120,!0),Ab("&=").asg(120,!0),Ab("^=").asg(120,!0),Ab("|=").asg(120,!0),Ab("->").exs(function(a){var b=Rb(a,119.5);return new U(void 0,b,a)}).exc(120,function(a,b){var c=Rb(b,119.5);return new U(a,c,b)}),Ab("=>").exs(function(a){var b=Rb(a,119.5);return new U(void 0,b,a,!0)}).exc(120,function(a,b){var c=Rb(b,119.5);return new U(a,c,b,!0)}),Ab("spawn").pre(115),Ab(",").ifx(110,!0),Ab("{").exs(function(a){var b=a.token.id;if("|"==b||"||"==b)return Eb(b,a);for(var c=[];"}"!=a.token.id;){c.length&&Tb(a,",");var d=a.token;if("}"==d.id)break;if(d=Bb(d,a),Tb(a),":"==a.token.id){Tb(a);var e=Rb(a,110);c.push(["prop",d,e])}else{if("}"!=a.token.id&&","!=a.token.id)throw new Error("Unexpected token '"+a.token+"'");if("'"==d.charAt(0)||'"'==d.charAt(0))throw new Error("Quoted identifiers not allowed in destructuring patterns ("+d+")");c.push(["pat",d,a.line])}}return Tb(a,"}",tb),new db(c,a)}).exc(260,function(a,b){var c=b.token.id;if("|"!=c&&"||"!=c)throw new Error("Unexpected token '"+b.token+"' - was expecting '|' or '||'");var d=[Eb(c,b)];return new $(a,d,b)}).stmt(Cb),Ab(";").stmt(function(){return A}),Ab(")",tb),Ab("]",tb),Ab("}"),Ab(":"),Ab("<eof>").exs(function(){throw new Error("Unexpected end of input (exs)")}).stmt(function(){throw new Error("Unexpected end of input (stmt)")}),Ab("function").exs(function(a){var b="";"<id>"==a.token.id&&(b=a.token.value,Tb(a));var c=Hb(a),d=Fb(a);return new p(b,c,d,a,!1)}).stmt(function(a){if("<id>"!=a.token.id)throw new Error("Malformed function declaration");var b=a.token.value;Tb(a);var c=Hb(a),d=Fb(a);return q(b,c,d,a)}),Ab("this",tb).exs(function(a){return new Y("this","tobj",a)}),Ab("true",tb).exs(function(a){return new M("true",a)}),Ab("false",tb).exs(function(a){return new M("false",a)}),Ab("null",tb).exs(function(a){return new M("null",a)}),Ab("collapse",tb).exs(function(a){return new E(a)}),Ab('"',ub).exs(function(a){for(var b=[],c=-1;'istr-"'!=a.token.id;){switch(a.token.id){case"<string>":-1!=c&&"string"==typeof b[c]?b[c]+=a.token.value:(b.push(a.token.value),++c);break;case"istr-#{":Tb(a),b.push([Rb(a)]),++c;break;case"<eof>":throw new Error("Unterminated string");default:throw new Error("Internal parser error: Unknown token in string ("+a.token+")")}Tb(a,void 0,ub)}if(Tb(a),-1==c&&(b.push(""),c=0),0==c&&"string"==typeof b[0]){var d='"'+b[0]+'"';return new M(d,a,"<string>")}return new O(b,a)}),Ab("istr-#{",sb),Ab('istr-"',tb),Ab("`",vb).exs(function(a){for(var b=[],c=0;"quasi-`"!=a.token.id;){switch(a.token.id){case"<string>":c%2?b[c-1]+=a.token.value:(b.push(a.token.value),++c);break;case"quasi-${":Tb(a),0==c%2&&(b.push(""),++c),b.push(Rb(a)),++c;break;case"quasi-$":0==c%2&&(b.push(""),++c),b.push(Ib(a)),++c;break;case"<eof>":throw new Error("Unterminated string");default:throw new Error("Internal parser error: Unknown token in string ("+a.token+")")}Tb(a,void 0,vb)}return Tb(a),0==c&&b.push(""),new P(b,a)}),Ab("quasi-${",sb),Ab("quasi-$",sb),Ab("quasi-`",tb),Ab("var").stmt(function(a){var b=Lb(a);return Kb(a),w(b,a)}),Ab("else"),Ab("if").stmt(function(a){Tb(a,"(");var b=Rb(a);Tb(a,")");var c=Qb(a),d=null;return"else"==a.token.id&&(Tb(a),d=Qb(a)),new y(b,c,d,a)}),Ab("while").stmt(function(a){Tb(a,"(");var b=Rb(a);Tb(a,")"),++d(a).break_scope,++d(a).continue_scope;var c=Qb(a);return--d(a).break_scope,--d(a).continue_scope,new I(0,b,c)}),Ab("do").stmt(function(a){++d(a).break_scope,++d(a).continue_scope;var b=Qb(a);--d(a).break_scope,--d(a).continue_scope,Tb(a,"while"),Tb(a,"(");var c=Rb(a);return Tb(a,")"),Kb(a),new I(2,c,b)}),Ab("for").stmt(function(a){Tb(a,"(");var b=null,c=null;if("var"==a.token.id?(Tb(a),c=Lb(a,!0)):";"!=a.token.id&&(b=Sb(a)),";"==a.token.id){Tb(a);var e=null;";"!=a.token.id&&(e=Rb(a)),Tb(a,";");var f=null;")"!=a.token.id&&(f=Rb(a)),Tb(a,")"),++d(a).break_scope,++d(a).continue_scope;var g=Qb(a);
return--d(a).break_scope,--d(a).continue_scope,H(b,c,e,f,g,a)}if("in"==a.token.id){if(Tb(a),c&&c.length>1)throw new Error("More than one variable declaration in for-in loop");var h=Rb(a);Tb(a,")"),++d(a).break_scope,++d(a).continue_scope;var g=Qb(a);--d(a).break_scope,--d(a).continue_scope;var i=c?c[0]:null;return J(b,i,h,g,a)}throw new Error("Unexpected token '"+a.token+"' in for-statement")}),Ab("continue").stmt(function(a){var b=null;if("<id>"!=a.token.id||a.newline||(b=a.token.value,Tb(a)),Kb(a),d(a).continue_scope)return new F("c",a,b);if(d(a).bl)return new D(void 0,a);throw new Error("Unexpected 'continue' statement")}),Ab("break").stmt(function(a){var b=null;if("<id>"!=a.token.id||a.newline||(b=a.token.value,Tb(a)),Kb(a),d(a).break_scope)return new F("b",a,b);if(d(a).bl)return new G(a,b);throw new Error("Unexpected 'break' statement")}),Ab("return").stmt(function(a){var b=null;return Jb(a.token)||a.newline||(b=Rb(a)),Kb(a),d(a).bl?new C(b,a):new D(b,a)}),Ab("with").stmt(function(a){Tb(a,"(");var b=Rb(a);Tb(a,")");var c=Qb(a);return new L(b,c,a)}),Ab("case"),Ab("default"),Ab("switch").stmt(function(a){Tb(a,"(");var b=Rb(a);Tb(a,")"),Tb(a,"{"),++d(a).break_scope;for(var c=[];"}"!=a.token.id;){var f=null;if("case"==a.token.id)Tb(a),f=Rb(a);else{if("default"!=a.token.id)throw new Error("Invalid token '"+a.token+"' in switch statement");Tb(a)}for(Tb(a,":"),e(a),g(a).exp=f;"case"!=a.token.id&&"default"!=a.token.id&&"}"!=a.token.id;){var h=Qb(a);i(h,a)}c.push(function(a){return[g(a).exp,k(a)]}(a))}return--d(a).break_scope,Tb(a,"}"),new o(b,c)}),Ab("throw").stmt(function(a){if(a.newline)throw new Error("Illegal newline after throw");var b=Rb(a);return Kb(a),new B(b,a)}),Ab("catch"),Ab("finally"),Ab("try").stmt(function(a){Tb(a,"{");var b=Cb(a),c=a.token.value;if("and"!=c&&"or"!=c){var d=Mb(a);if(!d[0]&&!d[1]&&!d[2])throw new Error("Missing 'catch', 'finally' or 'retract' after 'try'");return new z(b,d,a)}var e=[b];do Tb(a),Tb(a,"{"),e.push(Cb(a));while(a.token.value==c);var d=Mb(a);return hb(c,e,d,a)}),Ab("waitfor").stmt(function(a){if("{"==a.token.id){Tb(a,"{");var b=[Cb(a)],c=a.token.value;if("and"!=c&&"or"!=c)throw new Error("Missing 'and' or 'or' after 'waitfor' block");do Tb(a),Tb(a,"{"),b.push(Cb(a));while(a.token.value==c);var e=Mb(a);return hb(c,b,e,a)}Tb(a,"(");var f="var"==a.token.id;f&&Tb(a);var g=[];if(")"==a.token.id){if(f)throw new Error("Missing variables in waitfor(var)")}else g=Lb(a);Tb(a,")"),Tb(a,"{"),++d(a).fscoped_ctx;var h=Cb(a),e=Mb(a);return--d(a).fscoped_ctx,jb(f,g,h,e,a)}),Ab("using").stmt(function(a){var b;Tb(a,"("),(b="var"==a.token.id)&&Tb(a);var c,d,e=Rb(a,120);if("="==a.token.id)c=e,Tb(a),d=Rb(a);else{if(b)throw new Error("Syntax error in 'using' expression");d=e}Tb(a,")");var f=Qb(a);return nb(b,c,d,f,a)}),Ab("__js").stmt(function(a){a.allow_nblock&&++a.js_ctx;var b=Qb(a);return a.allow_nblock&&--a.js_ctx,b.is_nblock=a.allow_nblock,b}),Ab("abstract"),Ab("boolean"),Ab("byte"),Ab("char"),Ab("class"),Ab("const"),Ab("debugger"),Ab("double"),Ab("enum"),Ab("export"),Ab("extends"),Ab("final"),Ab("float"),Ab("goto"),Ab("implements"),Ab("import"),Ab("int"),Ab("interface"),Ab("long"),Ab("native"),Ab("package"),Ab("private"),Ab("protected"),Ab("public"),Ab("short"),Ab("static"),Ab("super"),Ab("synchronized"),Ab("throws"),Ab("transient"),Ab("volatile"),a.compile=Ob}(__oni_rt.c1={}),__oni_rt.modsrc["builtin:apollo-sys-common.sjs"]='__oni_rt.sys=exports;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar UNDEF;\n\n\n\n\n\nif(!(__oni_rt.G.__oni_rt_bundle)){\n__oni_rt.G.__oni_rt_bundle={};\n}\n\n\n\n\n\n\n\n\n\nexports.hostenv=__oni_rt.hostenv;\n\n\n\n\n\n__js exports.getGlobal=function(){return __oni_rt.G};\n\n\n\n\n\n\n\n\n\n__js exports.isArrayLike=function(obj){return Array.isArray(obj)||!!(obj&&Object.prototype.hasOwnProperty.call(obj,\'callee\'))||!!(__oni_rt.G.NodeList&&obj instanceof NodeList)||!!(__oni_rt.G.HTMLCollection&&obj instanceof HTMLCollection)||!!(__oni_rt.G.FileList&&obj instanceof FileList)||!!(__oni_rt.G.StaticNodeList&&obj instanceof StaticNodeList);\n\n\n\n\n\n\n};\n\n\n\n\n\n\n\n\n\n\n\n__js {\nvar _flatten=function(arr,rv){var l=arr.length;\n\nfor(var i=0;i<l;++i){\nvar elem=arr[i];\nif(exports.isArrayLike(elem))_flatten(elem,rv);else rv.push(elem);\n\n\n\n}\n};\n\nexports.flatten=function(arr){var rv=[];\n\nif(arr.length===UNDEF)throw new Error("flatten() called on non-array");\n_flatten(arr,rv);\nreturn rv;\n};\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n__js exports.expandSingleArgument=function(args){if(args.length==1&&exports.isArrayLike(args[0]))args=args[0];\n\n\nreturn args;\n};\n\n\n\n\n\n\n\n\n\n__js exports.isQuasi=function(obj){return (obj instanceof __oni_rt.QuasiProto);\n\n};\n\n\n\n\n\n\n__js exports.Quasi=function(arr){return __oni_rt.Quasi.apply(__oni_rt,arr)};\n\n\n\n\n\n\n__js exports.mergeObjects=function(){var rv={};\n\nvar sources=exports.expandSingleArgument(arguments);\nfor(var i=0;i<sources.length;i++ ){\nexports.extendObject(rv,sources[i]);\n}\nreturn rv;\n};\n\n\n\n\n\n__js exports.extendObject=function(dest,source){for(var o in source){\n\nif(Object.prototype.hasOwnProperty.call(source,o))dest[o]=source[o];\n}\nreturn dest;\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n__js {\nfunction URI(){}\nURI.prototype={toString:function(){\nreturn "#{this.protocol}://#{this.authority}#{this.relative}";\n\n}};\n\nURI.prototype.params=function(){if(!this._params){\n\nvar rv={};\nthis.query.replace(parseURLOptions.qsParser,function(_,k,v){if(k)rv[decodeURIComponent(k)]=decodeURIComponent(v);\n\n});\nthis._params=rv;\n}\nreturn this._params;\n};\n\nvar parseURLOptions={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],qsParser:/(?:^|&)([^&=]*)=?([^&]*)/g,parser:/^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/};\n\n\n\n\n\n\nexports.parseURL=function(str){var o=parseURLOptions,m=o.parser.exec(str),uri=new URI(),i=14;\n\n\n\n\nwhile(i-- )uri[o.key[i]]=m[i]||"";\nreturn uri;\n};\n}\n\n\n\n\n\n\n\n\n\n__js exports.constructQueryString=function(){var hashes=exports.flatten(arguments);\n\nvar hl=hashes.length;\nvar parts=[];\nfor(var h=0;h<hl;++h){\nvar hash=hashes[h];\nfor(var q in hash){\nvar l=encodeURIComponent(q)+"=";\nvar val=hash[q];\nif(!exports.isArrayLike(val))parts.push(l+encodeURIComponent(val));else{\n\n\nfor(var i=0;i<val.length;++i)parts.push(l+encodeURIComponent(val[i]));\n\n}\n}\n}\nreturn parts.join("&");\n};\n\n\n\n\n\n\n\n\n__js exports.constructURL=function(){var url_spec=exports.flatten(arguments);\n\nvar l=url_spec.length;\nvar rv=url_spec[0];\n\n\nfor(var i=1;i<l;++i){\nvar comp=url_spec[i];\nif(typeof comp!="string")break;\nif(rv.charAt(rv.length-1)!="/")rv+="/";\nrv+=comp.charAt(0)=="/"?comp.substr(1):comp;\n}\n\n\nvar qparts=[];\nfor(;i<l;++i){\nvar part=exports.constructQueryString(url_spec[i]);\nif(part.length)qparts.push(part);\n\n}\nvar query=qparts.join("&");\nif(query.length){\nif(rv.indexOf("?")!=-1)rv+="&";else rv+="?";\n\n\n\nrv+=query;\n}\nreturn rv;\n};\n\n\n\n\n\n\n\n__js exports.isSameOrigin=function(url1,url2){var a1=exports.parseURL(url1).authority;\n\nif(!a1)return true;\nvar a2=exports.parseURL(url2).authority;\nreturn !a2||(a1==a2);\n};\n\n\n\n\n\n\n\n\n\n\n__js exports.canonicalizeURL=function(url,base){if(__oni_rt.hostenv=="nodejs"&&__oni_rt.G.process.platform==\'win32\'){\n\n\n\nurl=url.replace(/\\\\/g,"/");\nbase=base.replace(/\\\\/g,"/");\n}\n\nvar a=exports.parseURL(url);\n\n\nif(base&&(base=exports.parseURL(base))&&(!a.protocol||a.protocol==base.protocol)){\n\nif(!a.directory&&!a.protocol){\na.directory=base.directory;\nif(!a.path&&(a.query||a.anchor))a.file=base.file;\n\n}else if(a.directory&&a.directory.charAt(0)!=\'/\'){\n\n\na.directory=(base.directory||"/")+a.directory;\n}\nif(!a.protocol){\na.protocol=base.protocol;\nif(!a.authority)a.authority=base.authority;\n\n}\n}\n\n\nvar pin=a.directory.split("/");\nvar l=pin.length;\nvar pout=[];\nfor(var i=0;i<l;++i){\nvar c=pin[i];\nif(c==".")continue;\nif(c==".."&&pout.length>1)pout.pop();else pout.push(c);\n\n\n\n}\na.directory=pout.join("/");\n\n\nvar rv="";\nif(a.protocol)rv+=a.protocol+":";\nif(a.authority)rv+="//"+a.authority;else if(a.protocol=="file")rv+="//";\n\n\n\nrv+=a.directory+a.file;\nif(a.query)rv+="?"+a.query;\nif(a.anchor)rv+="#"+a.anchor;\nreturn rv;\n};\n\n\n\n\n\n\n\n\n\n\n\nexports.jsonp=jsonp_hostenv;\n\n\n\n\n\n\n\nexports.getXDomainCaps=getXDomainCaps_hostenv;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexports.request=request_hostenv;\n\n\n\n\n\n\nexports.makeMemoizedFunction=function(f,keyfn){var lookups_in_progress={};\n\n\nvar memoizer=function(){var key=keyfn?keyfn.apply(this,arguments):arguments[0];\n\nvar rv=memoizer.db[key];\nif(typeof rv!==\'undefined\')return rv;\nif(!lookups_in_progress[key])lookups_in_progress[key]=spawn (function(self,args){\nreturn memoizer.db[key]=f.apply(self,args);\n\n})(this,arguments);\ntry{\nreturn lookups_in_progress[key].waitforValue();\n}finally{\n\nif(lookups_in_progress[key].waiting()==0){\nlookups_in_progress[key].abort();\ndelete lookups_in_progress[key];\n}\n}\n};\n\nmemoizer.db={};\nreturn memoizer;\n};\n\n\n\n\n\n\n\nexports.eval=eval_hostenv;\n\n\n\n\nvar pendingLoads={};\n\n\n\n\nfunction makeRequire(parent){var rf=function(module,settings){\n\n__js var opts=exports.extendObject({},settings);\n\nif(opts.callback){\ntry{\nvar rv=exports.isArrayLike(module)?requireInnerMultiple(module,rf,parent,opts):requireInner(module,rf,parent,opts);\n}catch(e){\nopts.callback(e);return;\n}\nopts.callback(UNDEF,rv);\nreturn;\n}else return exports.isArrayLike(module)?requireInnerMultiple(module,rf,parent,opts):requireInner(module,rf,parent,opts);\n\n\n};\n\n__js {\n\nrf.resolve=function(module,settings){var opts=exports.extendObject({},settings);\n\nreturn resolve(module,rf,parent,opts);\n};\n\nrf.path="";\nrf.alias={};\n\n\nif(exports.require){\nrf.hubs=exports.require.hubs;\nrf.modules=exports.require.modules;\nrf.extensions=exports.require.extensions;\n}else{\n\n\nrf.hubs=augmentHubs(getHubs_hostenv());\nrf.modules={};\n\nrf.extensions=getExtensions_hostenv();\n}\n\n}\n\n\nrf.url=function(relative){return resolve(relative,rf,parent,{loader:\'dummy\'}).path;\n\n\n};\n\nreturn rf;\n}\nexports._makeRequire=makeRequire;\n\n__js function augmentHubs(hubs){hubs.addDefault=function(hub){\n\nif(!this.defined(hub[0])){\n\nthis.push(hub);\nreturn true;\n}\nreturn false;\n};\nhubs.defined=function(prefix){for(var i=0;i<this.length;i++ ){\n\nvar h=this[i][0];\nvar l=Math.min(h.length,prefix.length);\nif(h.substr(0,l)==prefix.substr(0,l))return true;\n}\nreturn false;\n};\nreturn hubs;\n}\n\nfunction html_sjs_extractor(html,descriptor){var re=/<script (?:[^>]+ )?(?:type=[\'"]text\\/sjs[\'"]|main=[\'"]([^\'"]+)[\'"])[^>]*>((.|[\\r\\n])*?)<\\/script>/mg;\n\nvar match;\nvar src=\'\';\nwhile(match=re.exec(html)){\nif(match[1])src+=\'require("\'+match[1]+\'")\';else src+=match[2];\n\nsrc+=\';\';\n}\nif(!src)throw new Error("No sjs found in HTML file");\nreturn default_compiler(src,descriptor);\n}\n\n\n__js function resolveAliases(module,aliases){var ALIAS_REST=/^([^:]+):(.*)$/;\n\nvar alias_rest,alias;\nvar rv=module;\nvar level=10;\nwhile((alias_rest=ALIAS_REST.exec(rv))&&(alias=aliases[alias_rest[1]])){\n\nif(--level==0)throw new Error("Too much aliasing in modulename \'"+module+"\'");\n\nrv=alias+alias_rest[2];\n}\nreturn rv;\n}\n\n\n__js function resolveHubs(module,hubs,require_obj,parent,opts){var path=module;\n\nvar loader=opts.loader||default_loader;\nvar src=opts.src||default_src_loader;\nvar resolve=default_resolver;\n\n\nif(path.indexOf(":")==-1)path=resolveSchemelessURL_hostenv(path,require_obj,parent);\n\n\nvar level=10;\nfor(var i=0,hub;hub=hubs[i++ ];){\nif(path.indexOf(hub[0])==0){\n\nif(typeof hub[1]=="string"){\npath=hub[1]+path.substring(hub[0].length);\ni=0;\n\nif(path.indexOf(":")==-1)path=resolveSchemelessURL_hostenv(path,require_obj,parent);\n\nif(--level==0)throw new Error("Too much indirection in hub resolution for module \'"+module+"\'");\n\n}else if(typeof hub[1]=="object"){\n\nif(hub[1].src)src=hub[1].src;\nif(hub[1].loader)loader=hub[1].loader;\nresolve=hub[1].resolve||loader.resolve||resolve;\n\nbreak;\n}else throw new Error("Unexpected value for require.hubs element \'"+hub[0]+"\'");\n\n\n}\n}\n\nreturn {path:path,loader:loader,src:src,resolve:resolve};\n}\n\n\n__js function default_src_loader(path){throw new Error("Don\'t know how to load module at "+path);\n\n}\n\n\nvar compiled_src_tag=/^\\/\\*\\__oni_compiled_sjs_1\\*\\//;\nfunction default_compiler(src,descriptor){var f;\n\n\nif(typeof (src)===\'function\'){\nf=src;\n}else if(compiled_src_tag.exec(src)){\n\n\n\n\n\n\nf=new Function("module","exports","require","__onimodulename","__oni_altns",src);\n}else{\n\nf=exports.eval("(function(module,exports,require, __onimodulename, __oni_altns){"+src+"\\n})",{filename:"module #{descriptor.id}"});\n\n}\nf(descriptor,descriptor.exports,descriptor.require,"module #{descriptor.id}",{});\n\n}\n\ndefault_compiler.module_args=[\'module\',\'exports\',\'require\',\'__onimodulename\',\'__oni_altns\'];\n\nfunction default_loader(path,parent,src_loader,opts,spec){var compile=exports.require.extensions[spec.type];\n\nif(!compile)throw new Error("Unknown type \'"+spec.type+"\'");\n\n\nvar descriptor=exports.require.modules[path];\nvar pendingHook=pendingLoads[path];\n\nif(!descriptor&&!pendingHook){\n\npendingHook=pendingLoads[path]=spawn (function(){waitfor{\n\nvar src,loaded_from;\nif(typeof src_loader==="string"){\nsrc=src_loader;\nloaded_from="[src string]";\n}else if(path in __oni_rt.modsrc){\n\n\nloaded_from="[builtin]";\nsrc=__oni_rt.modsrc[path];\ndelete __oni_rt.modsrc[path];\n\n}else{\n\n({src,loaded_from})=src_loader(path);\n}\nvar descriptor={id:path,exports:{},loaded_from:loaded_from,loaded_by:parent,required_by:{}};\n\n\n\n\n\n\ndescriptor.require=makeRequire(descriptor);\n\nif(opts.main)descriptor.require.main=descriptor;\nexports.require.modules[path]=descriptor;\ntry{\ncompile(src,descriptor);\nreturn descriptor;\n}catch(e){\ndelete exports.require.modules[path];\nthrow e;\n}retract{\ndelete exports.require.modules[path];\n}\n}or{\nwaitfor(){\nhold(0);\npendingHook.resume=resume;\n}\n}\n})();\n}\n\nif(pendingHook){\n\n\n\nvar p=parent;\n\n\n\n\n\nwhile(p.loaded_by){\nif(path===p.id)return descriptor.exports;\n\np=p.loaded_by;\n}\n\n\ntry{\ndescriptor=pendingHook.waitforValue();\n}retract{\n\nif(pendingHook.waiting()==0&&pendingHook.resume){\npendingHook.resume();\npendingHook.value();\n}\n}finally{\n\n\nif(pendingHook.waiting()==0)delete pendingLoads[path];\n\n}\n}\n\nif(!descriptor.required_by[parent.id])descriptor.required_by[parent.id]=1;else ++descriptor.required_by[parent.id];\n\n\n\n\nreturn descriptor.exports;\n}\n\n__js function default_resolver(spec){if(!spec.ext)spec.path+="."+spec.type;\n\n\n};\n\n\nfunction http_src_loader(path){return {src:request_hostenv([path,{format:\'compiled\'}],{mime:\'text/plain\'}),loaded_from:path};\n\n\n\n\n}\n\n\n\n\n\n\nvar github_api="https://api.github.com/";\nvar github_opts={cbfield:"callback"};\nfunction github_src_loader(path){var user,repo,tag;\n\ntry{\n[ ,user,repo,tag,path]=/github:\\/([^\\/]+)\\/([^\\/]+)\\/([^\\/]+)\\/(.+)/.exec(path);\n}catch(e){throw new Error("Malformed module id \'"+path+"\'")}\n\nvar url=exports.constructURL(github_api,\'repos\',user,repo,"contents",path,{ref:tag});\n\nwaitfor{\nvar data=jsonp_hostenv(url,github_opts).data;\n}or{\n\nhold(10000);\nthrow new Error("Github timeout");\n}\nif(data.message&&!data.content)throw new Error(data.message);\n\n\n\nvar str=exports.require(\'sjs:string\');\n\nreturn {src:str.utf8ToUtf16(str.base64ToOctets(data.content)),loaded_from:url};\n\n\n\n}\n\n\nfunction resolve(module,require_obj,parent,opts){var path=resolveAliases(module,require_obj.alias);\n\n\n\nvar hubs=exports.require.hubs;\n\nvar resolveSpec=resolveHubs(path,hubs,require_obj,parent,opts);\n\n\nresolveSpec.path=exports.canonicalizeURL(resolveSpec.path,parent.id);\n\n\n\nvar ext,extMatch=/.+\\.([^\\.\\/]+)$/.exec(resolveSpec.path);\nif(extMatch){\next=extMatch[1].toLowerCase();\nresolveSpec.ext=ext;\nif(!exports.require.extensions[ext])ext=null;\n}\nresolveSpec.type=ext||\'sjs\';\n\nresolveSpec.resolve(resolveSpec,parent);\n\n__js {\n\nvar preload=__oni_rt.G.__oni_rt_bundle;\nvar pendingHubs=false;\nif(preload.h){\n\nvar deleteHubs=[];\nfor(var k in preload.h){\nif(!Object.prototype.hasOwnProperty.call(preload.h,k))continue;\nvar entries=preload.h[k];\nvar parent=getTopReqParent_hostenv();\nvar resolved=resolveHubs(k,hubs,exports.require,parent,{});\nif(resolved.path===k){\n\npendingHubs=true;\ncontinue;\n}\n\nfor(var i=0;i<entries.length;i++ ){\nvar ent=entries[i];\npreload.m[resolved.path+ent[0]]=ent[1];\n}\ndeleteHubs.push(k);\n}\n\nif(!pendingHubs)delete preload.h;else{\n\n\nfor(var i=0;i<deleteHubs.length;i++ )delete preload.h[deleteHubs[i]];\n\n}\n}\n\nif(module in __oni_rt.modsrc){\n\n\nif(!preload.m)preload.m={};\npreload.m[resolveSpec.path]=__oni_rt.modsrc[module];\ndelete __oni_rt.modsrc[module];\n}\n\nif(preload.m){\nvar path=resolveSpec.path;\n\nif(path.indexOf(\'!sjs\',path.length-4)!==-1)path=path.slice(0,-4);\n\nvar contents=preload.m[path];\nif(contents!==undefined){\nresolveSpec.src=function(){delete preload.m[path];\n\n\nreturn {src:contents,loaded_from:path+"#bundle"};\n};\n}\n}\n\n}\nreturn resolveSpec;\n}\n\n\n\n\n\n__js exports.resolve=function(url,require_obj,parent,opts){require_obj=require_obj||exports.require;\n\nparent=parent||getTopReqParent_hostenv();\nopts=opts||{};\nreturn resolve(url,require_obj,parent,opts);\n};\n\n\nfunction requireInner(module,require_obj,parent,opts){var resolveSpec=resolve(module,require_obj,parent,opts);\n\n\n\n\nmodule=resolveSpec.loader(resolveSpec.path,parent,resolveSpec.src,opts,resolveSpec);\nif(opts.copyTo){\nexports.extendObject(opts.copyTo,module);\n}\n\nreturn module;\n}\n\n\nfunction requireInnerMultiple(modules,require_obj,parent,opts){var rv={};\n\n\n\n\nfunction inner(i,l){if(l===1){\n\nvar descriptor=modules[i];\nvar id,exclude,include,name;\n__js if(typeof descriptor===\'string\'){\nid=descriptor;\nexclude=[];\ninclude=null;\nname=null;\n}else{\n\nid=descriptor.id;\nexclude=descriptor.exclude||[];\ninclude=descriptor.include||null;\nname=descriptor.name||null;\n}\n\nvar module=requireInner(id,require_obj,parent,opts);\n\n\n__js {\nvar addSym=function(k,v){if(rv[k]!==undefined){\n\nif(rv[k]===v)return;\nthrow new Error("require([.]) name clash while merging module \'#{id}\': Symbol \'#{k}\' defined in multiple modules");\n}\nrv[k]=v;\n};\n\nif(name){\naddSym(name,module);\n}else if(include){\nfor(var i=0;i<include.length;i++ ){\nvar o=include[i];\nif(!(o in module))throw new Error("require([.]) module #{id} has no symbol #{o}");\naddSym(o,module[o]);\n}\n}else{\nfor(var o in module){\n\n\n\nif(exclude.indexOf(o)!==-1)continue;\naddSym(o,module[o]);\n}\n}\n}\n}else{\n\nvar split=Math.floor(l/2);\nwaitfor{\ninner(i,split);\n}and{\n\ninner(i+split,l-split);\n}\n}\n}\n\n\ninner(0,modules.length);\n\nreturn rv;\n}\n\n\n__js exports.require=makeRequire(getTopReqParent_hostenv());\n\n__js exports.require.modules[\'builtin:apollo-sys.sjs\']={id:\'builtin:apollo-sys.sjs\',exports:exports,loaded_from:"[builtin]",required_by:{"[system]":1}};\n\n\n\n\n\n\nexports.init=function(cb){init_hostenv();\n\ncb();\n};\n\n',__oni_rt.modsrc["builtin:apollo-sys-xbrowser.sjs"]='var location;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n__js function determineLocation(){if(!location){\n\nlocation={};\nvar scripts=document.getElementsByTagName("script"),matches;\nfor(var i=0;i<scripts.length;++i){\nif((matches=/^(.*\\/)(?:[^\\/]*)stratified(?:[^\\/]*)\\.js(?:\\?.*)?$/.exec(scripts[i].src))){\nlocation.location=exports.canonicalizeURL(matches[1]+"modules/",document.location.href);\nlocation.requirePrefix=scripts[i].getAttribute("require-prefix");\nlocation.req_base=scripts[i].getAttribute("req-base")||document.location.href;\nlocation.main=scripts[i].getAttribute("main");\nbreak;\n}\n}\n}\nreturn location;\n}\n\n\n\n\nif(determineLocation().requirePrefix){\n__oni_rt.G[determineLocation().requirePrefix]={require:__oni_rt.sys.require};\n}else __oni_rt.G.require=__oni_rt.sys.require;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction jsonp_hostenv(url,settings){var opts=exports.mergeObjects({iframe:false,cbfield:"callback"},settings);\n\n\n\n\n\n\n\n\n\n\nurl=exports.constructURL(url,opts.query);\nif(opts.iframe||opts.forcecb)return jsonp_iframe(url,opts);else return jsonp_indoc(url,opts);\n\n\n\n};\n\nvar jsonp_req_count=0;\nvar jsonp_cb_obj="_oni_jsonpcb";\nfunction jsonp_indoc(url,opts){if(!window[jsonp_cb_obj])window[jsonp_cb_obj]={};\n\n\nvar cb="cb"+(jsonp_req_count++ );\nvar cb_query={};\ncb_query[opts.cbfield]=jsonp_cb_obj+"."+cb;\nurl=exports.constructURL(url,cb_query);\nvar elem=document.createElement("script");\nelem.setAttribute("src",url);\nelem.setAttribute("async","async");\nelem.setAttribute("type","text/javascript");\nvar complete=false;\nwaitfor(var rv){\nwindow[jsonp_cb_obj][cb]=resume;\ndocument.getElementsByTagName("head")[0].appendChild(elem);\n\nwaitfor(){\nif(elem.addEventListener)elem.addEventListener("error",resume,false);else{\n\n\nvar readystatechange=function(){if(elem.readyState==\'loaded\'&&!complete)resume();\n\n};\nelem.attachEvent("onreadystatechange",readystatechange);\n}\n}finally{\n\nif(elem.removeEventListener)elem.removeEventListener("error",resume,false);else elem.detachEvent("onreadystatechange",readystatechange);\n\n\n\n}\n\nthrow new Error("Could not complete JSONP request to \'"+url+"\'");\n}finally{\n\nelem.parentNode.removeChild(elem);\ndelete window[jsonp_cb_obj][cb];\n}\ncomplete=true;\nreturn rv;\n}\n\nfunction jsonp_iframe(url,opts){var cb=opts.forcecb||"R";\n\nvar cb_query={};\nif(opts.cbfield)cb_query[opts.cbfield]=cb;\n\nurl=exports.constructURL(url,cb_query);\nvar iframe=document.createElement("iframe");\ndocument.getElementsByTagName("head")[0].appendChild(iframe);\nvar doc=iframe.contentWindow.document;\nwaitfor(var rv){\ndoc.open();\niframe.contentWindow[cb]=resume;\n\n\nhold(0);\ndoc.write("\\x3Cscript type=\'text/javascript\' src=\\""+url+"\\">\\x3C/script>");\ndoc.close();\n}finally{\n\niframe.parentNode.removeChild(iframe);\n}\n\n\nhold(0);\nreturn rv;\n};\n\n\nvar XHR_caps;\nvar activex_xhr_ver;\n\nfunction getXHRCaps(){if(!XHR_caps){\n\nXHR_caps={};\n\nif(__oni_rt.G.XMLHttpRequest)XHR_caps.XHR_ctor=function(){\nreturn new XMLHttpRequest()};else XHR_caps.XHR_ctor=function(){\n\nif(typeof activex_xhr_ver!==\'undefined\')return new ActiveXObject(activex_xhr_ver);\n\n\nfor(var v in {"MSXML2.XMLHTTP.6.0":1,"MSXML2.XMLHTTP.3.0":1,"MSXML2.XMLHTTP":1}){\n\n\n\n\ntry{\nvar req=new ActiveXObject(v);\nactivex_xhr_ver=v;\nreturn req;\n}catch(e){\n}\n}\nthrow new Error("Browser does not support XMLHttpRequest");\n};\n\n\nXHR_caps.XHR_CORS=("withCredentials" in XHR_caps.XHR_ctor());\nif(!XHR_caps.XHR_CORS)XHR_caps.XDR=(typeof __oni_rt.G.XDomainRequest!==\'undefined\');\n\nXHR_caps.CORS=(XHR_caps.XHR_CORS||XHR_caps.XDR)?"CORS":"none";\n}\nreturn XHR_caps;\n}\n\n\n\n\n\n\nfunction getXDomainCaps_hostenv(){return getXHRCaps().CORS;\n\n}\n\n\n\n\n\n__js function getTopReqParent_hostenv(){var base=determineLocation().req_base;\n\nreturn {id:base,loaded_from:base,required_by:{"[system]":1}};\n\n\n\n}\n\n\n\n\n\n\n\n\n\n__js function resolveSchemelessURL_hostenv(url_string,req_obj,parent){if(req_obj.path&&req_obj.path.length)url_string=exports.constructURL(req_obj.path,url_string);\n\n\nreturn exports.canonicalizeURL(url_string,parent.id);\n}\n\n\n\n\n\n\nfunction request_hostenv(url,settings){var opts=exports.mergeObjects({method:"GET",body:null,response:\'string\',throwing:true},settings);\n\n\n\n\n\n\n\n\n\n\n\nurl=exports.constructURL(url,opts.query);\n\nvar caps=getXHRCaps();\nif(!caps.XDR||exports.isSameOrigin(url,document.location)){\nvar req=caps.XHR_ctor();\nreq.open(opts.method,url,true,opts.username||"",opts.password||"");\n}else{\n\n\nreq=new XDomainRequest();\nreq.open(opts.method,url);\n}\n\nwaitfor(var error){\nif(typeof req.onerror!==\'undefined\'){\nreq.onload=function(){resume()};\nreq.onerror=function(){resume(true)};\nreq.onabort=function(){resume(true)};\n}else{\n\nreq.onreadystatechange=function(evt){if(req.readyState!=4)return;else resume();\n\n\n\n\n};\n}\n\nif(opts.headers&&req.setRequestHeader)for(var h in opts.headers)req.setRequestHeader(h,opts.headers[h]);\n\n\n\n\n\nif(opts.mime&&req.overrideMimeType)req.overrideMimeType(opts.mime);\n\nif(opts.response===\'arraybuffer\')req.responseType=\'arraybuffer\';\n\n\nreq.send(opts.body);\n}retract{\n\nreq.abort();\n}\n\n\nif(error||(typeof req.status!==\'undefined\'&&!(req.status.toString().charAt(0) in {\'0\':1,\'2\':1}))){\n\n\nif(opts.throwing){\nvar txt="Failed "+opts.method+" request to \'"+url+"\'";\nif(req.statusText)txt+=": "+req.statusText;\nif(req.status)txt+=" ("+req.status+")";\nvar err=new Error(txt);\nerr.status=req.status;\nerr.data=req.response;\nthrow err;\n}else if(opts.response===\'string\'){\n\nreturn "";\n}\n\n}\nif(opts.response===\'string\')return req.responseText;else if(opts.response===\'arraybuffer\'){\n\n\nreturn {status:req.status,content:req.response,getHeader:name->req.getResponseHeader(name)};\n\n\n\n\n}else{\n\n\nreturn {status:req.status,content:req.responseText,getHeader:name->req.getResponseHeader(name)};\n\n\n\n\n}\n}\n\n\n\n\n__js function getHubs_hostenv(){return [["sjs:",determineLocation().location||{src:function(path){\n\n\nthrow new Error("Can\'t load module \'"+path+"\': The location of the StratifiedJS standard module lib is unknown - it can only be inferred automatically if you load stratified.js in the normal way through a <script> element.");\n\n}}],["github:",{src:github_src_loader}],["http:",{src:http_src_loader}],["https:",{src:http_src_loader}],["file:",{src:http_src_loader}],["x-wmapp1:",{src:http_src_loader}],["local:",{src:http_src_loader}]];\n\n\n\n\n\n\n\n\n\n\n\n\n}\n\nfunction getExtensions_hostenv(){return {\'sjs\':default_compiler,\'js\':function(src,descriptor){\n\n\n\n\n\nvar f=new Function("module","exports",src);\n\nf.apply(descriptor.exports,[descriptor,descriptor.exports]);\n},\'html\':html_sjs_extractor};\n\n\n\n}\n\n\n\n\nfunction eval_hostenv(code,settings){if(__oni_rt.UA=="msie"&&__oni_rt.G.execScript)return eval_msie(code,settings);\n\n\n\nvar filename=(settings&&settings.filename)||"sjs_eval_code";\nfilename="\'#{filename.replace(/\\\'/g,\'\\\\\\\'\')}\'";\nvar mode=(settings&&settings.mode)||"normal";\nvar js=__oni_rt.c1.compile(code,{filename:filename,mode:mode});\nreturn __oni_rt.G.eval(js);\n}\n\n\n\n\n\n\n\nvar IE_resume_counter=0;\n__oni_rt.IE_resume={};\nfunction eval_msie(code,settings){var filename=(settings&&settings.filename)||"sjs_eval_code";\n\nfilename="\'#{filename.replace(/\\\'/g,\'\\\\\\\'\')}\'";\nvar mode=(settings&&settings.mode)||"normal";\ntry{\nwaitfor(var rv,isexception){\nvar rc=++IE_resume_counter;\n__oni_rt.IE_resume[rc]=resume;\nvar js=__oni_rt.c1.compile("try{"+code+"\\n}catchall(rv) { spawn(hold(0),__oni_rt.IE_resume["+rc+"](rv[0],rv[1])) }",{filename:filename,mode:mode});\n\n\n__oni_rt.G.execScript(js);\n}\nif(isexception)throw rv;\n}finally{\n\ndelete __oni_rt.IE_resume[rc];\n}\nreturn rv;\n}\n\n\n\n\nfunction init_hostenv(){}\n\n\n\n\nif(!__oni_rt.G.__oni_rt_no_script_load){\nfunction runScripts(){var scripts=document.getElementsByTagName("script");\n\n\n\n\n\n\n\n\n\nvar ss=[];\nfor(var i=0;i<scripts.length;++i){\nvar s=scripts[i];\nif(s.getAttribute("type")=="text/sjs"){\nss.push(s);\n}\n}\n\nfor(var i=0;i<ss.length;++i){\nvar s=ss[i];\nvar m=s.getAttribute("module");\n\nvar content=s.textContent||s.innerHTML;\nif(__oni_rt.UA=="msie"){\n\ncontent=content.replace(/\\r\\n/,"");\n}\nif(m)__oni_rt.modsrc[m]=content;else{\n\n\nvar descriptor={id:document.location.href+"_inline_sjs_"+(i+1)};\n\n\n__oni_rt.sys.require.main=descriptor;\nvar f=exports.eval("(function(module, __onimodulename){"+content+"\\n})",{filename:"module #{descriptor.id}"});\n\nf(descriptor);\n}\n}\n\nvar mainModule=determineLocation().main;\nif(mainModule){\n__oni_rt.sys.require(mainModule,{main:true});\n}\n};\n\nif(document.readyState==="complete"){\nrunScripts();\n}else{\n\n\nif(__oni_rt.G.addEventListener)__oni_rt.G.addEventListener("load",runScripts,true);else __oni_rt.G.attachEvent("onload",runScripts);\n\n\n\n}\n}\n\n\n',Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length>>>0,c=Math.floor(arguments[1]||0);for(0>c&&(c=Math.max(b-Math.abs(c),0));b>c;++c)if(c in this&&this[c]===a)return c;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(a){var b=this.length>>>0,c=void 0===arguments[1]?b:Math.floor(arguments[1]);for(c>=0?c=Math.min(c,b-1):c+=b;c>=0;--c)if(c in this&&this[c]===a)return c;return-1}),Object.create||(Object.create=function(a){function b(){}return b.prototype=a,new b}),Object.keys||(Object.keys=function(a){var c,b=[];for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}),Object.getPrototypeOf||(Object.getPrototypeOf="".__proto__===String.prototype?function(a){return a.__proto__}:function(a){return a.constructor.prototype}),Function.prototype.bind||(Function.prototype.bind=function(a){var b=[].slice,c=b.call(arguments,1),d=this,e=function(){},f=function(){var f=a||{};try{this instanceof e&&(f=this)}catch(g){}return d.apply(f,c.concat(b.call(arguments)))};return e.prototype=d.prototype,f.prototype=new e,f}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),__oni_rt.sys||(__oni_rt.G.eval("(function(exports) {"+__oni_rt.c1.compile(__oni_rt.modsrc["builtin:apollo-sys-common.sjs"],{filename:"'apollo-sys-common.sjs'"})+"\n"+__oni_rt.c1.compile(__oni_rt.modsrc["builtin:apollo-sys-"+__oni_rt.hostenv+".sjs"],{filename:"'apollo-sys-"+__oni_rt.hostenv+".sjs'"})+"})({})"),delete __oni_rt.modsrc["builtin:apollo-sys-common.sjs"],delete __oni_rt.modsrc["builtin:apollo-sys-"+__oni_rt.hostenv+".sjs"]);